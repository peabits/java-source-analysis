
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Thread Â· GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../../../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../../../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../../../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../../../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../../../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="Runtime.html" />
    
    
    <link rel="prev" href="Process.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../../../">
            
                <a href="../../../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../../java.html">
            
                <a href="../../java.html">
            
                    
                    java
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="../lang.html">
            
                <a href="../lang.html">
            
                    
                    lang
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1.1" data-path="annotation.html">
            
                <a href="annotation.html">
            
                    
                    annotation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.2" data-path="instrument.html">
            
                <a href="instrument.html">
            
                    
                    instrument
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.3" data-path="invoke.html">
            
                <a href="invoke.html">
            
                    
                    invoke
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.4" data-path="management.html">
            
                <a href="management.html">
            
                    
                    mangement
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.5" data-path="ref.html">
            
                <a href="ref.html">
            
                    
                    ref
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.6" data-path="reflect.html">
            
                <a href="reflect.html">
            
                    
                    reflect
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.7" data-path="Object.html">
            
                <a href="Object.html">
            
                    
                    Object
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.8" data-path="Number.html">
            
                <a href="Number.html">
            
                    
                    Number
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.9" data-path="Boolean.html">
            
                <a href="Boolean.html">
            
                    
                    Boolean
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.10" data-path="Character.html">
            
                <a href="Character.html">
            
                    
                    Character
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.11" data-path="Byte.html">
            
                <a href="Byte.html">
            
                    
                    Byte
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.12" data-path="Short.html">
            
                <a href="Short.html">
            
                    
                    Short
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.13" data-path="Integer.html">
            
                <a href="Integer.html">
            
                    
                    Integer
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.14" data-path="Long.html">
            
                <a href="Long.html">
            
                    
                    Long
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.15" data-path="Float.html">
            
                <a href="Float.html">
            
                    
                    Float
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.16" data-path="Double.html">
            
                <a href="Double.html">
            
                    
                    Double
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.17" data-path="Enum.html">
            
                <a href="Enum.html">
            
                    
                    Enum
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.18" data-path="Void.html">
            
                <a href="Void.html">
            
                    
                    Void
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.19" data-path="String.html">
            
                <a href="String.html">
            
                    
                    String
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.20" data-path="AbstractStringBuilder.html">
            
                <a href="AbstractStringBuilder.html">
            
                    
                    AbstractStringBuilder
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.21" data-path="StringBuffer.html">
            
                <a href="StringBuffer.html">
            
                    
                    StringBuffer
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.22" data-path="StringBuilder.html">
            
                <a href="StringBuilder.html">
            
                    
                    StringBuilder
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.23" data-path="Math.html">
            
                <a href="Math.html">
            
                    
                    Math
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.24" data-path="StrictMath.html">
            
                <a href="StrictMath.html">
            
                    
                    StrictMath
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.25" data-path="System.html">
            
                <a href="System.html">
            
                    
                    System
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.26" data-path="Process.html">
            
                <a href="Process.html">
            
                    
                    Process
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.2.1.27" data-path="Thread.html">
            
                <a href="Thread.html">
            
                    
                    Thread
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.28" data-path="Runtime.html">
            
                <a href="Runtime.html">
            
                    
                    Runtime
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.29" data-path="Compiler.html">
            
                <a href="Compiler.html">
            
                    
                    Compiler
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.30" data-path="Package.html">
            
                <a href="Package.html">
            
                    
                    Package
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.31" data-path="Class.html">
            
                <a href="Class.html">
            
                    
                    Class
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.32" data-path="ClassLoader.html">
            
                <a href="ClassLoader.html">
            
                    
                    ClassLoader
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.33" data-path="Throwable.html">
            
                <a href="Throwable.html">
            
                    
                    Throwable
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.34" data-path="Error.html">
            
                <a href="Error.html">
            
                    
                    Error
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.35" data-path="Exception.html">
            
                <a href="Exception.html">
            
                    
                    Exception
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.2" data-path="../util.html">
            
                <a href="../util.html">
            
                    
                    util
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3" data-path="../math.html">
            
                <a href="../math.html">
            
                    
                    math
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4" data-path="../io.html">
            
                <a href="../io.html">
            
                    
                    io
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.5" data-path="../nio.html">
            
                <a href="../nio.html">
            
                    
                    nio
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.6" data-path="../net.html">
            
                <a href="../net.html">
            
                    
                    net
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.7" data-path="../sql.html">
            
                <a href="../sql.html">
            
                    
                    sql
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.8" data-path="../time.html">
            
                <a href="../time.html">
            
                    
                    time
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.9" data-path="../text.html">
            
                <a href="../text.html">
            
                    
                    text
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.10" data-path="../beans.html">
            
                <a href="../beans.html">
            
                    
                    beans
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.11" data-path="../rmi.html">
            
                <a href="../rmi.html">
            
                    
                    rmi
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.12" data-path="../security.html">
            
                <a href="../security.html">
            
                    
                    security
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.13" data-path="../applet.html">
            
                <a href="../applet.html">
            
                    
                    applet
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.14" data-path="../awt.html">
            
                <a href="../awt.html">
            
                    
                    awt
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../../javax.html">
            
                <a href="../../javax.html">
            
                    
                    javax
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../../.." >Thread</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="public-class-javalangthread">public class java.lang.Thread</h1>
<p><a href="#source-analysis">source analysis</a></p>
<p><a href="#source-code">source code</a></p>
<h2 id="source-analysis">source analysis</h2>
<h2 id="source-code">source code</h2>
<pre><code class="lang-java"><span class="hljs-comment">/*
 * Copyright (c) 1994, 2016, Oracle and/or its affiliates. All rights reserved.
 * ORACLE PROPRIETARY/CONFIDENTIAL. Use is subject to license terms.
 *
 *
 *
 *
 *
 *
 *
 *
 *
 *
 *
 *
 *
 *
 *
 *
 *
 *
 *
 *
 */</span>

<span class="hljs-keyword">package</span> java.lang;

<span class="hljs-keyword">import</span> java.lang.ref.Reference;
<span class="hljs-keyword">import</span> java.lang.ref.ReferenceQueue;
<span class="hljs-keyword">import</span> java.lang.ref.WeakReference;
<span class="hljs-keyword">import</span> java.security.AccessController;
<span class="hljs-keyword">import</span> java.security.AccessControlContext;
<span class="hljs-keyword">import</span> java.security.PrivilegedAction;
<span class="hljs-keyword">import</span> java.util.Map;
<span class="hljs-keyword">import</span> java.util.HashMap;
<span class="hljs-keyword">import</span> java.util.concurrent.ConcurrentHashMap;
<span class="hljs-keyword">import</span> java.util.concurrent.ConcurrentMap;
<span class="hljs-keyword">import</span> java.util.concurrent.locks.LockSupport;
<span class="hljs-keyword">import</span> sun.nio.ch.Interruptible;
<span class="hljs-keyword">import</span> sun.reflect.CallerSensitive;
<span class="hljs-keyword">import</span> sun.reflect.Reflection;
<span class="hljs-keyword">import</span> sun.security.util.SecurityConstants;


<span class="hljs-comment">/**
 * A &lt;i&gt;thread&lt;/i&gt; is a thread of execution in a program. The Java
 * Virtual Machine allows an application to have multiple threads of
 * execution running concurrently.
 * &lt;p&gt;
 * Every thread has a priority. Threads with higher priority are
 * executed in preference to threads with lower priority. Each thread
 * may or may not also be marked as a daemon. When code running in
 * some thread creates a new &lt;code&gt;Thread&lt;/code&gt; object, the new
 * thread has its priority initially set equal to the priority of the
 * creating thread, and is a daemon thread if and only if the
 * creating thread is a daemon.
 * &lt;p&gt;
 * When a Java Virtual Machine starts up, there is usually a single
 * non-daemon thread (which typically calls the method named
 * &lt;code&gt;main&lt;/code&gt; of some designated class). The Java Virtual
 * Machine continues to execute threads until either of the following
 * occurs:
 * &lt;ul&gt;
 * &lt;li&gt;The &lt;code&gt;exit&lt;/code&gt; method of class &lt;code&gt;Runtime&lt;/code&gt; has been
 *     called and the security manager has permitted the exit operation
 *     to take place.
 * &lt;li&gt;All threads that are not daemon threads have died, either by
 *     returning from the call to the &lt;code&gt;run&lt;/code&gt; method or by
 *     throwing an exception that propagates beyond the &lt;code&gt;run&lt;/code&gt;
 *     method.
 * &lt;/ul&gt;
 * &lt;p&gt;
 * There are two ways to create a new thread of execution. One is to
 * declare a class to be a subclass of &lt;code&gt;Thread&lt;/code&gt;. This
 * subclass should override the &lt;code&gt;run&lt;/code&gt; method of class
 * &lt;code&gt;Thread&lt;/code&gt;. An instance of the subclass can then be
 * allocated and started. For example, a thread that computes primes
 * larger than a stated value could be written as follows:
 * &lt;hr&gt;&lt;blockquote&gt;&lt;pre&gt;
 *     class PrimeThread extends Thread {
 *         long minPrime;
 *         PrimeThread(long minPrime) {
 *             this.minPrime = minPrime;
 *         }
 *
 *         public void run() {
 *             // compute primes larger than minPrime
 *             &amp;nbsp;.&amp;nbsp;.&amp;nbsp;.
 *         }
 *     }
 * &lt;/pre&gt;&lt;/blockquote&gt;&lt;hr&gt;
 * &lt;p&gt;
 * The following code would then create a thread and start it running:
 * &lt;blockquote&gt;&lt;pre&gt;
 *     PrimeThread p = new PrimeThread(143);
 *     p.start();
 * &lt;/pre&gt;&lt;/blockquote&gt;
 * &lt;p&gt;
 * The other way to create a thread is to declare a class that
 * implements the &lt;code&gt;Runnable&lt;/code&gt; interface. That class then
 * implements the &lt;code&gt;run&lt;/code&gt; method. An instance of the class can
 * then be allocated, passed as an argument when creating
 * &lt;code&gt;Thread&lt;/code&gt;, and started. The same example in this other
 * style looks like the following:
 * &lt;hr&gt;&lt;blockquote&gt;&lt;pre&gt;
 *     class PrimeRun implements Runnable {
 *         long minPrime;
 *         PrimeRun(long minPrime) {
 *             this.minPrime = minPrime;
 *         }
 *
 *         public void run() {
 *             // compute primes larger than minPrime
 *             &amp;nbsp;.&amp;nbsp;.&amp;nbsp;.
 *         }
 *     }
 * &lt;/pre&gt;&lt;/blockquote&gt;&lt;hr&gt;
 * &lt;p&gt;
 * The following code would then create a thread and start it running:
 * &lt;blockquote&gt;&lt;pre&gt;
 *     PrimeRun p = new PrimeRun(143);
 *     new Thread(p).start();
 * &lt;/pre&gt;&lt;/blockquote&gt;
 * &lt;p&gt;
 * Every thread has a name for identification purposes. More than
 * one thread may have the same name. If a name is not specified when
 * a thread is created, a new name is generated for it.
 * &lt;p&gt;
 * Unless otherwise noted, passing a {<span class="hljs-doctag">@code</span> null} argument to a constructor
 * or method in this class will cause a {<span class="hljs-doctag">@link</span> NullPointerException} to be
 * thrown.
 *
 * <span class="hljs-doctag">@author</span>  unascribed
 * <span class="hljs-doctag">@see</span>     Runnable
 * <span class="hljs-doctag">@see</span>     Runtime#exit(int)
 * <span class="hljs-doctag">@see</span>     #run()
 * <span class="hljs-doctag">@see</span>     #stop()
 * <span class="hljs-doctag">@since</span>   JDK1.0
 */</span>
<span class="hljs-keyword">public</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Thread</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">Runnable</span> </span>{
    <span class="hljs-comment">/* Make sure registerNatives is the first thing &lt;clinit&gt; does. */</span>
    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">native</span> <span class="hljs-keyword">void</span> <span class="hljs-title">registerNatives</span><span class="hljs-params">()</span></span>;
    <span class="hljs-keyword">static</span> {
        registerNatives();
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">volatile</span> String name;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span>            priority;
    <span class="hljs-keyword">private</span> Thread         threadQ;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">long</span>           eetop;

    <span class="hljs-comment">/* Whether or not to single_step this thread. */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">boolean</span>     single_step;

    <span class="hljs-comment">/* Whether or not the thread is a daemon thread. */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">boolean</span>     daemon = <span class="hljs-keyword">false</span>;

    <span class="hljs-comment">/* JVM state */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">boolean</span>     stillborn = <span class="hljs-keyword">false</span>;

    <span class="hljs-comment">/* What will be run. */</span>
    <span class="hljs-keyword">private</span> Runnable target;

    <span class="hljs-comment">/* The group of this thread */</span>
    <span class="hljs-keyword">private</span> ThreadGroup group;

    <span class="hljs-comment">/* The context ClassLoader for this thread */</span>
    <span class="hljs-keyword">private</span> ClassLoader contextClassLoader;

    <span class="hljs-comment">/* The inherited AccessControlContext of this thread */</span>
    <span class="hljs-keyword">private</span> AccessControlContext inheritedAccessControlContext;

    <span class="hljs-comment">/* For autonumbering anonymous threads. */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">int</span> threadInitNumber;
    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">synchronized</span> <span class="hljs-keyword">int</span> <span class="hljs-title">nextThreadNum</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">return</span> threadInitNumber++;
    }

    <span class="hljs-comment">/* ThreadLocal values pertaining to this thread. This map is maintained
     * by the ThreadLocal class. */</span>
    ThreadLocal.ThreadLocalMap threadLocals = <span class="hljs-keyword">null</span>;

    <span class="hljs-comment">/*
     * InheritableThreadLocal values pertaining to this thread. This map is
     * maintained by the InheritableThreadLocal class.
     */</span>
    ThreadLocal.ThreadLocalMap inheritableThreadLocals = <span class="hljs-keyword">null</span>;

    <span class="hljs-comment">/*
     * The requested stack size for this thread, or 0 if the creator did
     * not specify a stack size.  It is up to the VM to do whatever it
     * likes with this number; some VMs will ignore it.
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">long</span> stackSize;

    <span class="hljs-comment">/*
     * JVM-private state that persists after native thread termination.
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">long</span> nativeParkEventPointer;

    <span class="hljs-comment">/*
     * Thread ID
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">long</span> tid;

    <span class="hljs-comment">/* For generating thread ID */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">long</span> threadSeqNumber;

    <span class="hljs-comment">/* Java thread status for tools,
     * initialized to indicate thread &apos;not yet started&apos;
     */</span>

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">volatile</span> <span class="hljs-keyword">int</span> threadStatus = <span class="hljs-number">0</span>;


    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">synchronized</span> <span class="hljs-keyword">long</span> <span class="hljs-title">nextThreadID</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">return</span> ++threadSeqNumber;
    }

    <span class="hljs-comment">/**
     * The argument supplied to the current call to
     * java.util.concurrent.locks.LockSupport.park.
     * Set by (private) java.util.concurrent.locks.LockSupport.setBlocker
     * Accessed using java.util.concurrent.locks.LockSupport.getBlocker
     */</span>
    <span class="hljs-keyword">volatile</span> Object parkBlocker;

    <span class="hljs-comment">/* The object in which this thread is blocked in an interruptible I/O
     * operation, if any.  The blocker&apos;s interrupt method should be invoked
     * after setting this thread&apos;s interrupt status.
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">volatile</span> Interruptible blocker;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Object blockerLock = <span class="hljs-keyword">new</span> Object();

    <span class="hljs-comment">/* Set the blocker field; invoked via sun.misc.SharedSecrets from java.nio code
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">blockedOn</span><span class="hljs-params">(Interruptible b)</span> </span>{
        <span class="hljs-keyword">synchronized</span> (blockerLock) {
            blocker = b;
        }
    }

    <span class="hljs-comment">/**
     * The minimum priority that a thread can have.
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">int</span> MIN_PRIORITY = <span class="hljs-number">1</span>;

   <span class="hljs-comment">/**
     * The default priority that is assigned to a thread.
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">int</span> NORM_PRIORITY = <span class="hljs-number">5</span>;

    <span class="hljs-comment">/**
     * The maximum priority that a thread can have.
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">int</span> MAX_PRIORITY = <span class="hljs-number">10</span>;

    <span class="hljs-comment">/**
     * Returns a reference to the currently executing thread object.
     *
     * <span class="hljs-doctag">@return</span>  the currently executing thread.
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">native</span> Thread <span class="hljs-title">currentThread</span><span class="hljs-params">()</span></span>;

    <span class="hljs-comment">/**
     * A hint to the scheduler that the current thread is willing to yield
     * its current use of a processor. The scheduler is free to ignore this
     * hint.
     *
     * &lt;p&gt; Yield is a heuristic attempt to improve relative progression
     * between threads that would otherwise over-utilise a CPU. Its use
     * should be combined with detailed profiling and benchmarking to
     * ensure that it actually has the desired effect.
     *
     * &lt;p&gt; It is rarely appropriate to use this method. It may be useful
     * for debugging or testing purposes, where it may help to reproduce
     * bugs due to race conditions. It may also be useful when designing
     * concurrency control constructs such as the ones in the
     * {<span class="hljs-doctag">@link</span> java.util.concurrent.locks} package.
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">native</span> <span class="hljs-keyword">void</span> <span class="hljs-title">yield</span><span class="hljs-params">()</span></span>;

    <span class="hljs-comment">/**
     * Causes the currently executing thread to sleep (temporarily cease
     * execution) for the specified number of milliseconds, subject to
     * the precision and accuracy of system timers and schedulers. The thread
     * does not lose ownership of any monitors.
     *
     * <span class="hljs-doctag">@param</span>  millis
     *         the length of time to sleep in milliseconds
     *
     * <span class="hljs-doctag">@throws</span>  IllegalArgumentException
     *          if the value of {<span class="hljs-doctag">@code</span> millis} is negative
     *
     * <span class="hljs-doctag">@throws</span>  InterruptedException
     *          if any thread has interrupted the current thread. The
     *          &lt;i&gt;interrupted status&lt;/i&gt; of the current thread is
     *          cleared when this exception is thrown.
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">native</span> <span class="hljs-keyword">void</span> <span class="hljs-title">sleep</span><span class="hljs-params">(<span class="hljs-keyword">long</span> millis)</span> <span class="hljs-keyword">throws</span> InterruptedException</span>;

    <span class="hljs-comment">/**
     * Causes the currently executing thread to sleep (temporarily cease
     * execution) for the specified number of milliseconds plus the specified
     * number of nanoseconds, subject to the precision and accuracy of system
     * timers and schedulers. The thread does not lose ownership of any
     * monitors.
     *
     * <span class="hljs-doctag">@param</span>  millis
     *         the length of time to sleep in milliseconds
     *
     * <span class="hljs-doctag">@param</span>  nanos
     *         {<span class="hljs-doctag">@code</span> 0-999999} additional nanoseconds to sleep
     *
     * <span class="hljs-doctag">@throws</span>  IllegalArgumentException
     *          if the value of {<span class="hljs-doctag">@code</span> millis} is negative, or the value of
     *          {<span class="hljs-doctag">@code</span> nanos} is not in the range {<span class="hljs-doctag">@code</span> 0-999999}
     *
     * <span class="hljs-doctag">@throws</span>  InterruptedException
     *          if any thread has interrupted the current thread. The
     *          &lt;i&gt;interrupted status&lt;/i&gt; of the current thread is
     *          cleared when this exception is thrown.
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">sleep</span><span class="hljs-params">(<span class="hljs-keyword">long</span> millis, <span class="hljs-keyword">int</span> nanos)</span>
    <span class="hljs-keyword">throws</span> InterruptedException </span>{
        <span class="hljs-keyword">if</span> (millis &lt; <span class="hljs-number">0</span>) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> IllegalArgumentException(<span class="hljs-string">&quot;timeout value is negative&quot;</span>);
        }

        <span class="hljs-keyword">if</span> (nanos &lt; <span class="hljs-number">0</span> || nanos &gt; <span class="hljs-number">999999</span>) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> IllegalArgumentException(
                                <span class="hljs-string">&quot;nanosecond timeout value out of range&quot;</span>);
        }

        <span class="hljs-keyword">if</span> (nanos &gt;= <span class="hljs-number">500000</span> || (nanos != <span class="hljs-number">0</span> &amp;&amp; millis == <span class="hljs-number">0</span>)) {
            millis++;
        }

        sleep(millis);
    }

    <span class="hljs-comment">/**
     * Initializes a Thread with the current AccessControlContext.
     * <span class="hljs-doctag">@see</span> #init(ThreadGroup,Runnable,String,long,AccessControlContext,boolean)
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">init</span><span class="hljs-params">(ThreadGroup g, Runnable target, String name,
                      <span class="hljs-keyword">long</span> stackSize)</span> </span>{
        init(g, target, name, stackSize, <span class="hljs-keyword">null</span>, <span class="hljs-keyword">true</span>);
    }

    <span class="hljs-comment">/**
     * Initializes a Thread.
     *
     * <span class="hljs-doctag">@param</span> g the Thread group
     * <span class="hljs-doctag">@param</span> target the object whose run() method gets called
     * <span class="hljs-doctag">@param</span> name the name of the new Thread
     * <span class="hljs-doctag">@param</span> stackSize the desired stack size for the new thread, or
     *        zero to indicate that this parameter is to be ignored.
     * <span class="hljs-doctag">@param</span> acc the AccessControlContext to inherit, or
     *            AccessController.getContext() if null
     * <span class="hljs-doctag">@param</span> inheritThreadLocals if {<span class="hljs-doctag">@code</span> true}, inherit initial values for
     *            inheritable thread-locals from the constructing thread
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">init</span><span class="hljs-params">(ThreadGroup g, Runnable target, String name,
                      <span class="hljs-keyword">long</span> stackSize, AccessControlContext acc,
                      <span class="hljs-keyword">boolean</span> inheritThreadLocals)</span> </span>{
        <span class="hljs-keyword">if</span> (name == <span class="hljs-keyword">null</span>) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> NullPointerException(<span class="hljs-string">&quot;name cannot be null&quot;</span>);
        }

        <span class="hljs-keyword">this</span>.name = name;

        Thread parent = currentThread();
        SecurityManager security = System.getSecurityManager();
        <span class="hljs-keyword">if</span> (g == <span class="hljs-keyword">null</span>) {
            <span class="hljs-comment">/* Determine if it&apos;s an applet or not */</span>

            <span class="hljs-comment">/* If there is a security manager, ask the security manager
               what to do. */</span>
            <span class="hljs-keyword">if</span> (security != <span class="hljs-keyword">null</span>) {
                g = security.getThreadGroup();
            }

            <span class="hljs-comment">/* If the security doesn&apos;t have a strong opinion of the matter
               use the parent thread group. */</span>
            <span class="hljs-keyword">if</span> (g == <span class="hljs-keyword">null</span>) {
                g = parent.getThreadGroup();
            }
        }

        <span class="hljs-comment">/* checkAccess regardless of whether or not threadgroup is
           explicitly passed in. */</span>
        g.checkAccess();

        <span class="hljs-comment">/*
         * Do we have the required permissions?
         */</span>
        <span class="hljs-keyword">if</span> (security != <span class="hljs-keyword">null</span>) {
            <span class="hljs-keyword">if</span> (isCCLOverridden(getClass())) {
                security.checkPermission(SUBCLASS_IMPLEMENTATION_PERMISSION);
            }
        }

        g.addUnstarted();

        <span class="hljs-keyword">this</span>.group = g;
        <span class="hljs-keyword">this</span>.daemon = parent.isDaemon();
        <span class="hljs-keyword">this</span>.priority = parent.getPriority();
        <span class="hljs-keyword">if</span> (security == <span class="hljs-keyword">null</span> || isCCLOverridden(parent.getClass()))
            <span class="hljs-keyword">this</span>.contextClassLoader = parent.getContextClassLoader();
        <span class="hljs-keyword">else</span>
            <span class="hljs-keyword">this</span>.contextClassLoader = parent.contextClassLoader;
        <span class="hljs-keyword">this</span>.inheritedAccessControlContext =
                acc != <span class="hljs-keyword">null</span> ? acc : AccessController.getContext();
        <span class="hljs-keyword">this</span>.target = target;
        setPriority(priority);
        <span class="hljs-keyword">if</span> (inheritThreadLocals &amp;&amp; parent.inheritableThreadLocals != <span class="hljs-keyword">null</span>)
            <span class="hljs-keyword">this</span>.inheritableThreadLocals =
                ThreadLocal.createInheritedMap(parent.inheritableThreadLocals);
        <span class="hljs-comment">/* Stash the specified stack size in case the VM cares */</span>
        <span class="hljs-keyword">this</span>.stackSize = stackSize;

        <span class="hljs-comment">/* Set thread ID */</span>
        tid = nextThreadID();
    }

    <span class="hljs-comment">/**
     * Throws CloneNotSupportedException as a Thread can not be meaningfully
     * cloned. Construct a new Thread instead.
     *
     * <span class="hljs-doctag">@throws</span>  CloneNotSupportedException
     *          always
     */</span>
    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">protected</span> Object <span class="hljs-title">clone</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> CloneNotSupportedException </span>{
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> CloneNotSupportedException();
    }

    <span class="hljs-comment">/**
     * Allocates a new {<span class="hljs-doctag">@code</span> Thread} object. This constructor has the same
     * effect as {<span class="hljs-doctag">@linkplain</span> #Thread(ThreadGroup,Runnable,String) Thread}
     * {<span class="hljs-doctag">@code</span> (null, null, gname)}, where {<span class="hljs-doctag">@code</span> gname} is a newly generated
     * name. Automatically generated names are of the form
     * {<span class="hljs-doctag">@code</span> &quot;Thread-&quot;+}&lt;i&gt;n&lt;/i&gt;, where &lt;i&gt;n&lt;/i&gt; is an integer.
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">Thread</span><span class="hljs-params">()</span> </span>{
        init(<span class="hljs-keyword">null</span>, <span class="hljs-keyword">null</span>, <span class="hljs-string">&quot;Thread-&quot;</span> + nextThreadNum(), <span class="hljs-number">0</span>);
    }

    <span class="hljs-comment">/**
     * Allocates a new {<span class="hljs-doctag">@code</span> Thread} object. This constructor has the same
     * effect as {<span class="hljs-doctag">@linkplain</span> #Thread(ThreadGroup,Runnable,String) Thread}
     * {<span class="hljs-doctag">@code</span> (null, target, gname)}, where {<span class="hljs-doctag">@code</span> gname} is a newly generated
     * name. Automatically generated names are of the form
     * {<span class="hljs-doctag">@code</span> &quot;Thread-&quot;+}&lt;i&gt;n&lt;/i&gt;, where &lt;i&gt;n&lt;/i&gt; is an integer.
     *
     * <span class="hljs-doctag">@param</span>  target
     *         the object whose {<span class="hljs-doctag">@code</span> run} method is invoked when this thread
     *         is started. If {<span class="hljs-doctag">@code</span> null}, this classes {<span class="hljs-doctag">@code</span> run} method does
     *         nothing.
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">Thread</span><span class="hljs-params">(Runnable target)</span> </span>{
        init(<span class="hljs-keyword">null</span>, target, <span class="hljs-string">&quot;Thread-&quot;</span> + nextThreadNum(), <span class="hljs-number">0</span>);
    }

    <span class="hljs-comment">/**
     * Creates a new Thread that inherits the given AccessControlContext.
     * This is not a public constructor.
     */</span>
    Thread(Runnable target, AccessControlContext acc) {
        init(<span class="hljs-keyword">null</span>, target, <span class="hljs-string">&quot;Thread-&quot;</span> + nextThreadNum(), <span class="hljs-number">0</span>, acc, <span class="hljs-keyword">false</span>);
    }

    <span class="hljs-comment">/**
     * Allocates a new {<span class="hljs-doctag">@code</span> Thread} object. This constructor has the same
     * effect as {<span class="hljs-doctag">@linkplain</span> #Thread(ThreadGroup,Runnable,String) Thread}
     * {<span class="hljs-doctag">@code</span> (group, target, gname)} ,where {<span class="hljs-doctag">@code</span> gname} is a newly generated
     * name. Automatically generated names are of the form
     * {<span class="hljs-doctag">@code</span> &quot;Thread-&quot;+}&lt;i&gt;n&lt;/i&gt;, where &lt;i&gt;n&lt;/i&gt; is an integer.
     *
     * <span class="hljs-doctag">@param</span>  group
     *         the thread group. If {<span class="hljs-doctag">@code</span> null} and there is a security
     *         manager, the group is determined by {<span class="hljs-doctag">@linkplain</span>
     *         SecurityManager#getThreadGroup SecurityManager.getThreadGroup()}.
     *         If there is not a security manager or {<span class="hljs-doctag">@code</span>
     *         SecurityManager.getThreadGroup()} returns {<span class="hljs-doctag">@code</span> null}, the group
     *         is set to the current thread&apos;s thread group.
     *
     * <span class="hljs-doctag">@param</span>  target
     *         the object whose {<span class="hljs-doctag">@code</span> run} method is invoked when this thread
     *         is started. If {<span class="hljs-doctag">@code</span> null}, this thread&apos;s run method is invoked.
     *
     * <span class="hljs-doctag">@throws</span>  SecurityException
     *          if the current thread cannot create a thread in the specified
     *          thread group
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">Thread</span><span class="hljs-params">(ThreadGroup group, Runnable target)</span> </span>{
        init(group, target, <span class="hljs-string">&quot;Thread-&quot;</span> + nextThreadNum(), <span class="hljs-number">0</span>);
    }

    <span class="hljs-comment">/**
     * Allocates a new {<span class="hljs-doctag">@code</span> Thread} object. This constructor has the same
     * effect as {<span class="hljs-doctag">@linkplain</span> #Thread(ThreadGroup,Runnable,String) Thread}
     * {<span class="hljs-doctag">@code</span> (null, null, name)}.
     *
     * <span class="hljs-doctag">@param</span>   name
     *          the name of the new thread
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">Thread</span><span class="hljs-params">(String name)</span> </span>{
        init(<span class="hljs-keyword">null</span>, <span class="hljs-keyword">null</span>, name, <span class="hljs-number">0</span>);
    }

    <span class="hljs-comment">/**
     * Allocates a new {<span class="hljs-doctag">@code</span> Thread} object. This constructor has the same
     * effect as {<span class="hljs-doctag">@linkplain</span> #Thread(ThreadGroup,Runnable,String) Thread}
     * {<span class="hljs-doctag">@code</span> (group, null, name)}.
     *
     * <span class="hljs-doctag">@param</span>  group
     *         the thread group. If {<span class="hljs-doctag">@code</span> null} and there is a security
     *         manager, the group is determined by {<span class="hljs-doctag">@linkplain</span>
     *         SecurityManager#getThreadGroup SecurityManager.getThreadGroup()}.
     *         If there is not a security manager or {<span class="hljs-doctag">@code</span>
     *         SecurityManager.getThreadGroup()} returns {<span class="hljs-doctag">@code</span> null}, the group
     *         is set to the current thread&apos;s thread group.
     *
     * <span class="hljs-doctag">@param</span>  name
     *         the name of the new thread
     *
     * <span class="hljs-doctag">@throws</span>  SecurityException
     *          if the current thread cannot create a thread in the specified
     *          thread group
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">Thread</span><span class="hljs-params">(ThreadGroup group, String name)</span> </span>{
        init(group, <span class="hljs-keyword">null</span>, name, <span class="hljs-number">0</span>);
    }

    <span class="hljs-comment">/**
     * Allocates a new {<span class="hljs-doctag">@code</span> Thread} object. This constructor has the same
     * effect as {<span class="hljs-doctag">@linkplain</span> #Thread(ThreadGroup,Runnable,String) Thread}
     * {<span class="hljs-doctag">@code</span> (null, target, name)}.
     *
     * <span class="hljs-doctag">@param</span>  target
     *         the object whose {<span class="hljs-doctag">@code</span> run} method is invoked when this thread
     *         is started. If {<span class="hljs-doctag">@code</span> null}, this thread&apos;s run method is invoked.
     *
     * <span class="hljs-doctag">@param</span>  name
     *         the name of the new thread
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">Thread</span><span class="hljs-params">(Runnable target, String name)</span> </span>{
        init(<span class="hljs-keyword">null</span>, target, name, <span class="hljs-number">0</span>);
    }

    <span class="hljs-comment">/**
     * Allocates a new {<span class="hljs-doctag">@code</span> Thread} object so that it has {<span class="hljs-doctag">@code</span> target}
     * as its run object, has the specified {<span class="hljs-doctag">@code</span> name} as its name,
     * and belongs to the thread group referred to by {<span class="hljs-doctag">@code</span> group}.
     *
     * &lt;p&gt;If there is a security manager, its
     * {<span class="hljs-doctag">@link</span> SecurityManager#checkAccess(ThreadGroup) checkAccess}
     * method is invoked with the ThreadGroup as its argument.
     *
     * &lt;p&gt;In addition, its {<span class="hljs-doctag">@code</span> checkPermission} method is invoked with
     * the {<span class="hljs-doctag">@code</span> RuntimePermission(&quot;enableContextClassLoaderOverride&quot;)}
     * permission when invoked directly or indirectly by the constructor
     * of a subclass which overrides the {<span class="hljs-doctag">@code</span> getContextClassLoader}
     * or {<span class="hljs-doctag">@code</span> setContextClassLoader} methods.
     *
     * &lt;p&gt;The priority of the newly created thread is set equal to the
     * priority of the thread creating it, that is, the currently running
     * thread. The method {<span class="hljs-doctag">@linkplain</span> #setPriority setPriority} may be
     * used to change the priority to a new value.
     *
     * &lt;p&gt;The newly created thread is initially marked as being a daemon
     * thread if and only if the thread creating it is currently marked
     * as a daemon thread. The method {<span class="hljs-doctag">@linkplain</span> #setDaemon setDaemon}
     * may be used to change whether or not a thread is a daemon.
     *
     * <span class="hljs-doctag">@param</span>  group
     *         the thread group. If {<span class="hljs-doctag">@code</span> null} and there is a security
     *         manager, the group is determined by {<span class="hljs-doctag">@linkplain</span>
     *         SecurityManager#getThreadGroup SecurityManager.getThreadGroup()}.
     *         If there is not a security manager or {<span class="hljs-doctag">@code</span>
     *         SecurityManager.getThreadGroup()} returns {<span class="hljs-doctag">@code</span> null}, the group
     *         is set to the current thread&apos;s thread group.
     *
     * <span class="hljs-doctag">@param</span>  target
     *         the object whose {<span class="hljs-doctag">@code</span> run} method is invoked when this thread
     *         is started. If {<span class="hljs-doctag">@code</span> null}, this thread&apos;s run method is invoked.
     *
     * <span class="hljs-doctag">@param</span>  name
     *         the name of the new thread
     *
     * <span class="hljs-doctag">@throws</span>  SecurityException
     *          if the current thread cannot create a thread in the specified
     *          thread group or cannot override the context class loader methods.
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">Thread</span><span class="hljs-params">(ThreadGroup group, Runnable target, String name)</span> </span>{
        init(group, target, name, <span class="hljs-number">0</span>);
    }

    <span class="hljs-comment">/**
     * Allocates a new {<span class="hljs-doctag">@code</span> Thread} object so that it has {<span class="hljs-doctag">@code</span> target}
     * as its run object, has the specified {<span class="hljs-doctag">@code</span> name} as its name,
     * and belongs to the thread group referred to by {<span class="hljs-doctag">@code</span> group}, and has
     * the specified &lt;i&gt;stack size&lt;/i&gt;.
     *
     * &lt;p&gt;This constructor is identical to {<span class="hljs-doctag">@link</span>
     * #Thread(ThreadGroup,Runnable,String)} with the exception of the fact
     * that it allows the thread stack size to be specified.  The stack size
     * is the approximate number of bytes of address space that the virtual
     * machine is to allocate for this thread&apos;s stack.  &lt;b&gt;The effect of the
     * {<span class="hljs-doctag">@code</span> stackSize} parameter, if any, is highly platform dependent.&lt;/b&gt;
     *
     * &lt;p&gt;On some platforms, specifying a higher value for the
     * {<span class="hljs-doctag">@code</span> stackSize} parameter may allow a thread to achieve greater
     * recursion depth before throwing a {<span class="hljs-doctag">@link</span> StackOverflowError}.
     * Similarly, specifying a lower value may allow a greater number of
     * threads to exist concurrently without throwing an {<span class="hljs-doctag">@link</span>
     * OutOfMemoryError} (or other internal error).  The details of
     * the relationship between the value of the &lt;tt&gt;stackSize&lt;/tt&gt; parameter
     * and the maximum recursion depth and concurrency level are
     * platform-dependent.  &lt;b&gt;On some platforms, the value of the
     * {<span class="hljs-doctag">@code</span> stackSize} parameter may have no effect whatsoever.&lt;/b&gt;
     *
     * &lt;p&gt;The virtual machine is free to treat the {<span class="hljs-doctag">@code</span> stackSize}
     * parameter as a suggestion.  If the specified value is unreasonably low
     * for the platform, the virtual machine may instead use some
     * platform-specific minimum value; if the specified value is unreasonably
     * high, the virtual machine may instead use some platform-specific
     * maximum.  Likewise, the virtual machine is free to round the specified
     * value up or down as it sees fit (or to ignore it completely).
     *
     * &lt;p&gt;Specifying a value of zero for the {<span class="hljs-doctag">@code</span> stackSize} parameter will
     * cause this constructor to behave exactly like the
     * {<span class="hljs-doctag">@code</span> Thread(ThreadGroup, Runnable, String)} constructor.
     *
     * &lt;p&gt;&lt;i&gt;Due to the platform-dependent nature of the behavior of this
     * constructor, extreme care should be exercised in its use.
     * The thread stack size necessary to perform a given computation will
     * likely vary from one JRE implementation to another.  In light of this
     * variation, careful tuning of the stack size parameter may be required,
     * and the tuning may need to be repeated for each JRE implementation on
     * which an application is to run.&lt;/i&gt;
     *
     * &lt;p&gt;Implementation note: Java platform implementers are encouraged to
     * document their implementation&apos;s behavior with respect to the
     * {<span class="hljs-doctag">@code</span> stackSize} parameter.
     *
     *
     * <span class="hljs-doctag">@param</span>  group
     *         the thread group. If {<span class="hljs-doctag">@code</span> null} and there is a security
     *         manager, the group is determined by {<span class="hljs-doctag">@linkplain</span>
     *         SecurityManager#getThreadGroup SecurityManager.getThreadGroup()}.
     *         If there is not a security manager or {<span class="hljs-doctag">@code</span>
     *         SecurityManager.getThreadGroup()} returns {<span class="hljs-doctag">@code</span> null}, the group
     *         is set to the current thread&apos;s thread group.
     *
     * <span class="hljs-doctag">@param</span>  target
     *         the object whose {<span class="hljs-doctag">@code</span> run} method is invoked when this thread
     *         is started. If {<span class="hljs-doctag">@code</span> null}, this thread&apos;s run method is invoked.
     *
     * <span class="hljs-doctag">@param</span>  name
     *         the name of the new thread
     *
     * <span class="hljs-doctag">@param</span>  stackSize
     *         the desired stack size for the new thread, or zero to indicate
     *         that this parameter is to be ignored.
     *
     * <span class="hljs-doctag">@throws</span>  SecurityException
     *          if the current thread cannot create a thread in the specified
     *          thread group
     *
     * <span class="hljs-doctag">@since</span> 1.4
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">Thread</span><span class="hljs-params">(ThreadGroup group, Runnable target, String name,
                  <span class="hljs-keyword">long</span> stackSize)</span> </span>{
        init(group, target, name, stackSize);
    }

    <span class="hljs-comment">/**
     * Causes this thread to begin execution; the Java Virtual Machine
     * calls the &lt;code&gt;run&lt;/code&gt; method of this thread.
     * &lt;p&gt;
     * The result is that two threads are running concurrently: the
     * current thread (which returns from the call to the
     * &lt;code&gt;start&lt;/code&gt; method) and the other thread (which executes its
     * &lt;code&gt;run&lt;/code&gt; method).
     * &lt;p&gt;
     * It is never legal to start a thread more than once.
     * In particular, a thread may not be restarted once it has completed
     * execution.
     *
     * <span class="hljs-doctag">@exception</span>  IllegalThreadStateException  if the thread was already
     *               started.
     * <span class="hljs-doctag">@see</span>        #run()
     * <span class="hljs-doctag">@see</span>        #stop()
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">synchronized</span> <span class="hljs-keyword">void</span> <span class="hljs-title">start</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-comment">/**
         * This method is not invoked for the main method thread or &quot;system&quot;
         * group threads created/set up by the VM. Any new functionality added
         * to this method in the future may have to also be added to the VM.
         *
         * A zero status value corresponds to state &quot;NEW&quot;.
         */</span>
        <span class="hljs-keyword">if</span> (threadStatus != <span class="hljs-number">0</span>)
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> IllegalThreadStateException();

        <span class="hljs-comment">/* Notify the group that this thread is about to be started
         * so that it can be added to the group&apos;s list of threads
         * and the group&apos;s unstarted count can be decremented. */</span>
        group.add(<span class="hljs-keyword">this</span>);

        <span class="hljs-keyword">boolean</span> started = <span class="hljs-keyword">false</span>;
        <span class="hljs-keyword">try</span> {
            start0();
            started = <span class="hljs-keyword">true</span>;
        } <span class="hljs-keyword">finally</span> {
            <span class="hljs-keyword">try</span> {
                <span class="hljs-keyword">if</span> (!started) {
                    group.threadStartFailed(<span class="hljs-keyword">this</span>);
                }
            } <span class="hljs-keyword">catch</span> (Throwable ignore) {
                <span class="hljs-comment">/* do nothing. If start0 threw a Throwable then
                  it will be passed up the call stack */</span>
            }
        }
    }

    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">native</span> <span class="hljs-keyword">void</span> <span class="hljs-title">start0</span><span class="hljs-params">()</span></span>;

    <span class="hljs-comment">/**
     * If this thread was constructed using a separate
     * &lt;code&gt;Runnable&lt;/code&gt; run object, then that
     * &lt;code&gt;Runnable&lt;/code&gt; object&apos;s &lt;code&gt;run&lt;/code&gt; method is called;
     * otherwise, this method does nothing and returns.
     * &lt;p&gt;
     * Subclasses of &lt;code&gt;Thread&lt;/code&gt; should override this method.
     *
     * <span class="hljs-doctag">@see</span>     #start()
     * <span class="hljs-doctag">@see</span>     #stop()
     * <span class="hljs-doctag">@see</span>     #Thread(ThreadGroup, Runnable, String)
     */</span>
    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">run</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">if</span> (target != <span class="hljs-keyword">null</span>) {
            target.run();
        }
    }

    <span class="hljs-comment">/**
     * This method is called by the system to give a Thread
     * a chance to clean up before it actually exits.
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">exit</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">if</span> (group != <span class="hljs-keyword">null</span>) {
            group.threadTerminated(<span class="hljs-keyword">this</span>);
            group = <span class="hljs-keyword">null</span>;
        }
        <span class="hljs-comment">/* Aggressively null out all reference fields: see bug 4006245 */</span>
        target = <span class="hljs-keyword">null</span>;
        <span class="hljs-comment">/* Speed the release of some of these resources */</span>
        threadLocals = <span class="hljs-keyword">null</span>;
        inheritableThreadLocals = <span class="hljs-keyword">null</span>;
        inheritedAccessControlContext = <span class="hljs-keyword">null</span>;
        blocker = <span class="hljs-keyword">null</span>;
        uncaughtExceptionHandler = <span class="hljs-keyword">null</span>;
    }

    <span class="hljs-comment">/**
     * Forces the thread to stop executing.
     * &lt;p&gt;
     * If there is a security manager installed, its &lt;code&gt;checkAccess&lt;/code&gt;
     * method is called with &lt;code&gt;this&lt;/code&gt;
     * as its argument. This may result in a
     * &lt;code&gt;SecurityException&lt;/code&gt; being raised (in the current thread).
     * &lt;p&gt;
     * If this thread is different from the current thread (that is, the current
     * thread is trying to stop a thread other than itself), the
     * security manager&apos;s &lt;code&gt;checkPermission&lt;/code&gt; method (with a
     * &lt;code&gt;RuntimePermission(&quot;stopThread&quot;)&lt;/code&gt; argument) is called in
     * addition.
     * Again, this may result in throwing a
     * &lt;code&gt;SecurityException&lt;/code&gt; (in the current thread).
     * &lt;p&gt;
     * The thread represented by this thread is forced to stop whatever
     * it is doing abnormally and to throw a newly created
     * &lt;code&gt;ThreadDeath&lt;/code&gt; object as an exception.
     * &lt;p&gt;
     * It is permitted to stop a thread that has not yet been started.
     * If the thread is eventually started, it immediately terminates.
     * &lt;p&gt;
     * An application should not normally try to catch
     * &lt;code&gt;ThreadDeath&lt;/code&gt; unless it must do some extraordinary
     * cleanup operation (note that the throwing of
     * &lt;code&gt;ThreadDeath&lt;/code&gt; causes &lt;code&gt;finally&lt;/code&gt; clauses of
     * &lt;code&gt;try&lt;/code&gt; statements to be executed before the thread
     * officially dies).  If a &lt;code&gt;catch&lt;/code&gt; clause catches a
     * &lt;code&gt;ThreadDeath&lt;/code&gt; object, it is important to rethrow the
     * object so that the thread actually dies.
     * &lt;p&gt;
     * The top-level error handler that reacts to otherwise uncaught
     * exceptions does not print out a message or otherwise notify the
     * application if the uncaught exception is an instance of
     * &lt;code&gt;ThreadDeath&lt;/code&gt;.
     *
     * <span class="hljs-doctag">@exception</span>  SecurityException  if the current thread cannot
     *               modify this thread.
     * <span class="hljs-doctag">@see</span>        #interrupt()
     * <span class="hljs-doctag">@see</span>        #checkAccess()
     * <span class="hljs-doctag">@see</span>        #run()
     * <span class="hljs-doctag">@see</span>        #start()
     * <span class="hljs-doctag">@see</span>        ThreadDeath
     * <span class="hljs-doctag">@see</span>        ThreadGroup#uncaughtException(Thread,Throwable)
     * <span class="hljs-doctag">@see</span>        SecurityManager#checkAccess(Thread)
     * <span class="hljs-doctag">@see</span>        SecurityManager#checkPermission
     * <span class="hljs-doctag">@deprecated</span> This method is inherently unsafe.  Stopping a thread with
     *       Thread.stop causes it to unlock all of the monitors that it
     *       has locked (as a natural consequence of the unchecked
     *       &lt;code&gt;ThreadDeath&lt;/code&gt; exception propagating up the stack).  If
     *       any of the objects previously protected by these monitors were in
     *       an inconsistent state, the damaged objects become visible to
     *       other threads, potentially resulting in arbitrary behavior.  Many
     *       uses of &lt;code&gt;stop&lt;/code&gt; should be replaced by code that simply
     *       modifies some variable to indicate that the target thread should
     *       stop running.  The target thread should check this variable
     *       regularly, and return from its run method in an orderly fashion
     *       if the variable indicates that it is to stop running.  If the
     *       target thread waits for long periods (on a condition variable,
     *       for example), the &lt;code&gt;interrupt&lt;/code&gt; method should be used to
     *       interrupt the wait.
     *       For more information, see
     *       &lt;a href=&quot;{<span class="hljs-doctag">@docRoot</span>}/../technotes/guides/concurrency/threadPrimitiveDeprecation.html&quot;&gt;Why
     *       are Thread.stop, Thread.suspend and Thread.resume Deprecated?&lt;/a&gt;.
     */</span>
    <span class="hljs-meta">@Deprecated</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">void</span> <span class="hljs-title">stop</span><span class="hljs-params">()</span> </span>{
        SecurityManager security = System.getSecurityManager();
        <span class="hljs-keyword">if</span> (security != <span class="hljs-keyword">null</span>) {
            checkAccess();
            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span> != Thread.currentThread()) {
                security.checkPermission(SecurityConstants.STOP_THREAD_PERMISSION);
            }
        }
        <span class="hljs-comment">// A zero status value corresponds to &quot;NEW&quot;, it can&apos;t change to</span>
        <span class="hljs-comment">// not-NEW because we hold the lock.</span>
        <span class="hljs-keyword">if</span> (threadStatus != <span class="hljs-number">0</span>) {
            resume(); <span class="hljs-comment">// Wake up thread if it was suspended; no-op otherwise</span>
        }

        <span class="hljs-comment">// The VM can handle all thread states</span>
        stop0(<span class="hljs-keyword">new</span> ThreadDeath());
    }

    <span class="hljs-comment">/**
     * Throws {<span class="hljs-doctag">@code</span> UnsupportedOperationException}.
     *
     * <span class="hljs-doctag">@param</span> obj ignored
     *
     * <span class="hljs-doctag">@deprecated</span> This method was originally designed to force a thread to stop
     *        and throw a given {<span class="hljs-doctag">@code</span> Throwable} as an exception. It was
     *        inherently unsafe (see {<span class="hljs-doctag">@link</span> #stop()} for details), and furthermore
     *        could be used to generate exceptions that the target thread was
     *        not prepared to handle.
     *        For more information, see
     *        &lt;a href=&quot;{<span class="hljs-doctag">@docRoot</span>}/../technotes/guides/concurrency/threadPrimitiveDeprecation.html&quot;&gt;Why
     *        are Thread.stop, Thread.suspend and Thread.resume Deprecated?&lt;/a&gt;.
     */</span>
    <span class="hljs-meta">@Deprecated</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">synchronized</span> <span class="hljs-keyword">void</span> <span class="hljs-title">stop</span><span class="hljs-params">(Throwable obj)</span> </span>{
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> UnsupportedOperationException();
    }

    <span class="hljs-comment">/**
     * Interrupts this thread.
     *
     * &lt;p&gt; Unless the current thread is interrupting itself, which is
     * always permitted, the {<span class="hljs-doctag">@link</span> #checkAccess() checkAccess} method
     * of this thread is invoked, which may cause a {<span class="hljs-doctag">@link</span>
     * SecurityException} to be thrown.
     *
     * &lt;p&gt; If this thread is blocked in an invocation of the {<span class="hljs-doctag">@link</span>
     * Object#wait() wait()}, {<span class="hljs-doctag">@link</span> Object#wait(long) wait(long)}, or {<span class="hljs-doctag">@link</span>
     * Object#wait(long, int) wait(long, int)} methods of the {<span class="hljs-doctag">@link</span> Object}
     * class, or of the {<span class="hljs-doctag">@link</span> #join()}, {<span class="hljs-doctag">@link</span> #join(long)}, {<span class="hljs-doctag">@link</span>
     * #join(long, int)}, {<span class="hljs-doctag">@link</span> #sleep(long)}, or {<span class="hljs-doctag">@link</span> #sleep(long, int)},
     * methods of this class, then its interrupt status will be cleared and it
     * will receive an {<span class="hljs-doctag">@link</span> InterruptedException}.
     *
     * &lt;p&gt; If this thread is blocked in an I/O operation upon an {<span class="hljs-doctag">@link</span>
     * java.nio.channels.InterruptibleChannel InterruptibleChannel}
     * then the channel will be closed, the thread&apos;s interrupt
     * status will be set, and the thread will receive a {<span class="hljs-doctag">@link</span>
     * java.nio.channels.ClosedByInterruptException}.
     *
     * &lt;p&gt; If this thread is blocked in a {<span class="hljs-doctag">@link</span> java.nio.channels.Selector}
     * then the thread&apos;s interrupt status will be set and it will return
     * immediately from the selection operation, possibly with a non-zero
     * value, just as if the selector&apos;s {<span class="hljs-doctag">@link</span>
     * java.nio.channels.Selector#wakeup wakeup} method were invoked.
     *
     * &lt;p&gt; If none of the previous conditions hold then this thread&apos;s interrupt
     * status will be set. &lt;/p&gt;
     *
     * &lt;p&gt; Interrupting a thread that is not alive need not have any effect.
     *
     * <span class="hljs-doctag">@throws</span>  SecurityException
     *          if the current thread cannot modify this thread
     *
     * <span class="hljs-doctag">@revised</span> 6.0
     * <span class="hljs-doctag">@spec</span> JSR-51
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">interrupt</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span> != Thread.currentThread())
            checkAccess();

        <span class="hljs-keyword">synchronized</span> (blockerLock) {
            Interruptible b = blocker;
            <span class="hljs-keyword">if</span> (b != <span class="hljs-keyword">null</span>) {
                interrupt0();           <span class="hljs-comment">// Just to set the interrupt flag</span>
                b.interrupt(<span class="hljs-keyword">this</span>);
                <span class="hljs-keyword">return</span>;
            }
        }
        interrupt0();
    }

    <span class="hljs-comment">/**
     * Tests whether the current thread has been interrupted.  The
     * &lt;i&gt;interrupted status&lt;/i&gt; of the thread is cleared by this method.  In
     * other words, if this method were to be called twice in succession, the
     * second call would return false (unless the current thread were
     * interrupted again, after the first call had cleared its interrupted
     * status and before the second call had examined it).
     *
     * &lt;p&gt;A thread interruption ignored because a thread was not alive
     * at the time of the interrupt will be reflected by this method
     * returning false.
     *
     * <span class="hljs-doctag">@return</span>  &lt;code&gt;true&lt;/code&gt; if the current thread has been interrupted;
     *          &lt;code&gt;false&lt;/code&gt; otherwise.
     * <span class="hljs-doctag">@see</span> #isInterrupted()
     * <span class="hljs-doctag">@revised</span> 6.0
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">interrupted</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">return</span> currentThread().isInterrupted(<span class="hljs-keyword">true</span>);
    }

    <span class="hljs-comment">/**
     * Tests whether this thread has been interrupted.  The &lt;i&gt;interrupted
     * status&lt;/i&gt; of the thread is unaffected by this method.
     *
     * &lt;p&gt;A thread interruption ignored because a thread was not alive
     * at the time of the interrupt will be reflected by this method
     * returning false.
     *
     * <span class="hljs-doctag">@return</span>  &lt;code&gt;true&lt;/code&gt; if this thread has been interrupted;
     *          &lt;code&gt;false&lt;/code&gt; otherwise.
     * <span class="hljs-doctag">@see</span>     #interrupted()
     * <span class="hljs-doctag">@revised</span> 6.0
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">isInterrupted</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">return</span> isInterrupted(<span class="hljs-keyword">false</span>);
    }

    <span class="hljs-comment">/**
     * Tests if some Thread has been interrupted.  The interrupted state
     * is reset or not based on the value of ClearInterrupted that is
     * passed.
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">native</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">isInterrupted</span><span class="hljs-params">(<span class="hljs-keyword">boolean</span> ClearInterrupted)</span></span>;

    <span class="hljs-comment">/**
     * Throws {<span class="hljs-doctag">@link</span> NoSuchMethodError}.
     *
     * <span class="hljs-doctag">@deprecated</span> This method was originally designed to destroy this
     *     thread without any cleanup. Any monitors it held would have
     *     remained locked. However, the method was never implemented.
     *     If if were to be implemented, it would be deadlock-prone in
     *     much the manner of {<span class="hljs-doctag">@link</span> #suspend}. If the target thread held
     *     a lock protecting a critical system resource when it was
     *     destroyed, no thread could ever access this resource again.
     *     If another thread ever attempted to lock this resource, deadlock
     *     would result. Such deadlocks typically manifest themselves as
     *     &quot;frozen&quot; processes. For more information, see
     *     &lt;a href=&quot;{<span class="hljs-doctag">@docRoot</span>}/../technotes/guides/concurrency/threadPrimitiveDeprecation.html&quot;&gt;
     *     Why are Thread.stop, Thread.suspend and Thread.resume Deprecated?&lt;/a&gt;.
     * <span class="hljs-doctag">@throws</span> NoSuchMethodError always
     */</span>
    <span class="hljs-meta">@Deprecated</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">destroy</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> NoSuchMethodError();
    }

    <span class="hljs-comment">/**
     * Tests if this thread is alive. A thread is alive if it has
     * been started and has not yet died.
     *
     * <span class="hljs-doctag">@return</span>  &lt;code&gt;true&lt;/code&gt; if this thread is alive;
     *          &lt;code&gt;false&lt;/code&gt; otherwise.
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">native</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">isAlive</span><span class="hljs-params">()</span></span>;

    <span class="hljs-comment">/**
     * Suspends this thread.
     * &lt;p&gt;
     * First, the &lt;code&gt;checkAccess&lt;/code&gt; method of this thread is called
     * with no arguments. This may result in throwing a
     * &lt;code&gt;SecurityException &lt;/code&gt;(in the current thread).
     * &lt;p&gt;
     * If the thread is alive, it is suspended and makes no further
     * progress unless and until it is resumed.
     *
     * <span class="hljs-doctag">@exception</span>  SecurityException  if the current thread cannot modify
     *               this thread.
     * <span class="hljs-doctag">@see</span> #checkAccess
     * <span class="hljs-doctag">@deprecated</span>   This method has been deprecated, as it is
     *   inherently deadlock-prone.  If the target thread holds a lock on the
     *   monitor protecting a critical system resource when it is suspended, no
     *   thread can access this resource until the target thread is resumed. If
     *   the thread that would resume the target thread attempts to lock this
     *   monitor prior to calling &lt;code&gt;resume&lt;/code&gt;, deadlock results.  Such
     *   deadlocks typically manifest themselves as &quot;frozen&quot; processes.
     *   For more information, see
     *   &lt;a href=&quot;{<span class="hljs-doctag">@docRoot</span>}/../technotes/guides/concurrency/threadPrimitiveDeprecation.html&quot;&gt;Why
     *   are Thread.stop, Thread.suspend and Thread.resume Deprecated?&lt;/a&gt;.
     */</span>
    <span class="hljs-meta">@Deprecated</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">void</span> <span class="hljs-title">suspend</span><span class="hljs-params">()</span> </span>{
        checkAccess();
        suspend0();
    }

    <span class="hljs-comment">/**
     * Resumes a suspended thread.
     * &lt;p&gt;
     * First, the &lt;code&gt;checkAccess&lt;/code&gt; method of this thread is called
     * with no arguments. This may result in throwing a
     * &lt;code&gt;SecurityException&lt;/code&gt; (in the current thread).
     * &lt;p&gt;
     * If the thread is alive but suspended, it is resumed and is
     * permitted to make progress in its execution.
     *
     * <span class="hljs-doctag">@exception</span>  SecurityException  if the current thread cannot modify this
     *               thread.
     * <span class="hljs-doctag">@see</span>        #checkAccess
     * <span class="hljs-doctag">@see</span>        #suspend()
     * <span class="hljs-doctag">@deprecated</span> This method exists solely for use with {<span class="hljs-doctag">@link</span> #suspend},
     *     which has been deprecated because it is deadlock-prone.
     *     For more information, see
     *     &lt;a href=&quot;{<span class="hljs-doctag">@docRoot</span>}/../technotes/guides/concurrency/threadPrimitiveDeprecation.html&quot;&gt;Why
     *     are Thread.stop, Thread.suspend and Thread.resume Deprecated?&lt;/a&gt;.
     */</span>
    <span class="hljs-meta">@Deprecated</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">void</span> <span class="hljs-title">resume</span><span class="hljs-params">()</span> </span>{
        checkAccess();
        resume0();
    }

    <span class="hljs-comment">/**
     * Changes the priority of this thread.
     * &lt;p&gt;
     * First the &lt;code&gt;checkAccess&lt;/code&gt; method of this thread is called
     * with no arguments. This may result in throwing a
     * &lt;code&gt;SecurityException&lt;/code&gt;.
     * &lt;p&gt;
     * Otherwise, the priority of this thread is set to the smaller of
     * the specified &lt;code&gt;newPriority&lt;/code&gt; and the maximum permitted
     * priority of the thread&apos;s thread group.
     *
     * <span class="hljs-doctag">@param</span> newPriority priority to set this thread to
     * <span class="hljs-doctag">@exception</span>  IllegalArgumentException  If the priority is not in the
     *               range &lt;code&gt;MIN_PRIORITY&lt;/code&gt; to
     *               &lt;code&gt;MAX_PRIORITY&lt;/code&gt;.
     * <span class="hljs-doctag">@exception</span>  SecurityException  if the current thread cannot modify
     *               this thread.
     * <span class="hljs-doctag">@see</span>        #getPriority
     * <span class="hljs-doctag">@see</span>        #checkAccess()
     * <span class="hljs-doctag">@see</span>        #getThreadGroup()
     * <span class="hljs-doctag">@see</span>        #MAX_PRIORITY
     * <span class="hljs-doctag">@see</span>        #MIN_PRIORITY
     * <span class="hljs-doctag">@see</span>        ThreadGroup#getMaxPriority()
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setPriority</span><span class="hljs-params">(<span class="hljs-keyword">int</span> newPriority)</span> </span>{
        ThreadGroup g;
        checkAccess();
        <span class="hljs-keyword">if</span> (newPriority &gt; MAX_PRIORITY || newPriority &lt; MIN_PRIORITY) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> IllegalArgumentException();
        }
        <span class="hljs-keyword">if</span>((g = getThreadGroup()) != <span class="hljs-keyword">null</span>) {
            <span class="hljs-keyword">if</span> (newPriority &gt; g.getMaxPriority()) {
                newPriority = g.getMaxPriority();
            }
            setPriority0(priority = newPriority);
        }
    }

    <span class="hljs-comment">/**
     * Returns this thread&apos;s priority.
     *
     * <span class="hljs-doctag">@return</span>  this thread&apos;s priority.
     * <span class="hljs-doctag">@see</span>     #setPriority
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">int</span> <span class="hljs-title">getPriority</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">return</span> priority;
    }

    <span class="hljs-comment">/**
     * Changes the name of this thread to be equal to the argument
     * &lt;code&gt;name&lt;/code&gt;.
     * &lt;p&gt;
     * First the &lt;code&gt;checkAccess&lt;/code&gt; method of this thread is called
     * with no arguments. This may result in throwing a
     * &lt;code&gt;SecurityException&lt;/code&gt;.
     *
     * <span class="hljs-doctag">@param</span>      name   the new name for this thread.
     * <span class="hljs-doctag">@exception</span>  SecurityException  if the current thread cannot modify this
     *               thread.
     * <span class="hljs-doctag">@see</span>        #getName
     * <span class="hljs-doctag">@see</span>        #checkAccess()
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">synchronized</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setName</span><span class="hljs-params">(String name)</span> </span>{
        checkAccess();
        <span class="hljs-keyword">if</span> (name == <span class="hljs-keyword">null</span>) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> NullPointerException(<span class="hljs-string">&quot;name cannot be null&quot;</span>);
        }

        <span class="hljs-keyword">this</span>.name = name;
        <span class="hljs-keyword">if</span> (threadStatus != <span class="hljs-number">0</span>) {
            setNativeName(name);
        }
    }

    <span class="hljs-comment">/**
     * Returns this thread&apos;s name.
     *
     * <span class="hljs-doctag">@return</span>  this thread&apos;s name.
     * <span class="hljs-doctag">@see</span>     #setName(String)
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> String <span class="hljs-title">getName</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">return</span> name;
    }

    <span class="hljs-comment">/**
     * Returns the thread group to which this thread belongs.
     * This method returns null if this thread has died
     * (been stopped).
     *
     * <span class="hljs-doctag">@return</span>  this thread&apos;s thread group.
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> ThreadGroup <span class="hljs-title">getThreadGroup</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">return</span> group;
    }

    <span class="hljs-comment">/**
     * Returns an estimate of the number of active threads in the current
     * thread&apos;s {<span class="hljs-doctag">@linkplain</span> java.lang.ThreadGroup thread group} and its
     * subgroups. Recursively iterates over all subgroups in the current
     * thread&apos;s thread group.
     *
     * &lt;p&gt; The value returned is only an estimate because the number of
     * threads may change dynamically while this method traverses internal
     * data structures, and might be affected by the presence of certain
     * system threads. This method is intended primarily for debugging
     * and monitoring purposes.
     *
     * <span class="hljs-doctag">@return</span>  an estimate of the number of active threads in the current
     *          thread&apos;s thread group and in any other thread group that
     *          has the current thread&apos;s thread group as an ancestor
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">int</span> <span class="hljs-title">activeCount</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">return</span> currentThread().getThreadGroup().activeCount();
    }

    <span class="hljs-comment">/**
     * Copies into the specified array every active thread in the current
     * thread&apos;s thread group and its subgroups. This method simply
     * invokes the {<span class="hljs-doctag">@link</span> java.lang.ThreadGroup#enumerate(Thread[])}
     * method of the current thread&apos;s thread group.
     *
     * &lt;p&gt; An application might use the {<span class="hljs-doctag">@linkplain</span> #activeCount activeCount}
     * method to get an estimate of how big the array should be, however
     * &lt;i&gt;if the array is too short to hold all the threads, the extra threads
     * are silently ignored.&lt;/i&gt;  If it is critical to obtain every active
     * thread in the current thread&apos;s thread group and its subgroups, the
     * invoker should verify that the returned int value is strictly less
     * than the length of {<span class="hljs-doctag">@code</span> tarray}.
     *
     * &lt;p&gt; Due to the inherent race condition in this method, it is recommended
     * that the method only be used for debugging and monitoring purposes.
     *
     * <span class="hljs-doctag">@param</span>  tarray
     *         an array into which to put the list of threads
     *
     * <span class="hljs-doctag">@return</span>  the number of threads put into the array
     *
     * <span class="hljs-doctag">@throws</span>  SecurityException
     *          if {<span class="hljs-doctag">@link</span> java.lang.ThreadGroup#checkAccess} determines that
     *          the current thread cannot access its thread group
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">int</span> <span class="hljs-title">enumerate</span><span class="hljs-params">(Thread tarray[])</span> </span>{
        <span class="hljs-keyword">return</span> currentThread().getThreadGroup().enumerate(tarray);
    }

    <span class="hljs-comment">/**
     * Counts the number of stack frames in this thread. The thread must
     * be suspended.
     *
     * <span class="hljs-doctag">@return</span>     the number of stack frames in this thread.
     * <span class="hljs-doctag">@exception</span>  IllegalThreadStateException  if this thread is not
     *             suspended.
     * <span class="hljs-doctag">@deprecated</span> The definition of this call depends on {<span class="hljs-doctag">@link</span> #suspend},
     *             which is deprecated.  Further, the results of this call
     *             were never well-defined.
     */</span>
    <span class="hljs-meta">@Deprecated</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">native</span> <span class="hljs-keyword">int</span> <span class="hljs-title">countStackFrames</span><span class="hljs-params">()</span></span>;

    <span class="hljs-comment">/**
     * Waits at most {<span class="hljs-doctag">@code</span> millis} milliseconds for this thread to
     * die. A timeout of {<span class="hljs-doctag">@code</span> 0} means to wait forever.
     *
     * &lt;p&gt; This implementation uses a loop of {<span class="hljs-doctag">@code</span> this.wait} calls
     * conditioned on {<span class="hljs-doctag">@code</span> this.isAlive}. As a thread terminates the
     * {<span class="hljs-doctag">@code</span> this.notifyAll} method is invoked. It is recommended that
     * applications not use {<span class="hljs-doctag">@code</span> wait}, {<span class="hljs-doctag">@code</span> notify}, or
     * {<span class="hljs-doctag">@code</span> notifyAll} on {<span class="hljs-doctag">@code</span> Thread} instances.
     *
     * <span class="hljs-doctag">@param</span>  millis
     *         the time to wait in milliseconds
     *
     * <span class="hljs-doctag">@throws</span>  IllegalArgumentException
     *          if the value of {<span class="hljs-doctag">@code</span> millis} is negative
     *
     * <span class="hljs-doctag">@throws</span>  InterruptedException
     *          if any thread has interrupted the current thread. The
     *          &lt;i&gt;interrupted status&lt;/i&gt; of the current thread is
     *          cleared when this exception is thrown.
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">synchronized</span> <span class="hljs-keyword">void</span> <span class="hljs-title">join</span><span class="hljs-params">(<span class="hljs-keyword">long</span> millis)</span>
    <span class="hljs-keyword">throws</span> InterruptedException </span>{
        <span class="hljs-keyword">long</span> base = System.currentTimeMillis();
        <span class="hljs-keyword">long</span> now = <span class="hljs-number">0</span>;

        <span class="hljs-keyword">if</span> (millis &lt; <span class="hljs-number">0</span>) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> IllegalArgumentException(<span class="hljs-string">&quot;timeout value is negative&quot;</span>);
        }

        <span class="hljs-keyword">if</span> (millis == <span class="hljs-number">0</span>) {
            <span class="hljs-keyword">while</span> (isAlive()) {
                wait(<span class="hljs-number">0</span>);
            }
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">while</span> (isAlive()) {
                <span class="hljs-keyword">long</span> delay = millis - now;
                <span class="hljs-keyword">if</span> (delay &lt;= <span class="hljs-number">0</span>) {
                    <span class="hljs-keyword">break</span>;
                }
                wait(delay);
                now = System.currentTimeMillis() - base;
            }
        }
    }

    <span class="hljs-comment">/**
     * Waits at most {<span class="hljs-doctag">@code</span> millis} milliseconds plus
     * {<span class="hljs-doctag">@code</span> nanos} nanoseconds for this thread to die.
     *
     * &lt;p&gt; This implementation uses a loop of {<span class="hljs-doctag">@code</span> this.wait} calls
     * conditioned on {<span class="hljs-doctag">@code</span> this.isAlive}. As a thread terminates the
     * {<span class="hljs-doctag">@code</span> this.notifyAll} method is invoked. It is recommended that
     * applications not use {<span class="hljs-doctag">@code</span> wait}, {<span class="hljs-doctag">@code</span> notify}, or
     * {<span class="hljs-doctag">@code</span> notifyAll} on {<span class="hljs-doctag">@code</span> Thread} instances.
     *
     * <span class="hljs-doctag">@param</span>  millis
     *         the time to wait in milliseconds
     *
     * <span class="hljs-doctag">@param</span>  nanos
     *         {<span class="hljs-doctag">@code</span> 0-999999} additional nanoseconds to wait
     *
     * <span class="hljs-doctag">@throws</span>  IllegalArgumentException
     *          if the value of {<span class="hljs-doctag">@code</span> millis} is negative, or the value
     *          of {<span class="hljs-doctag">@code</span> nanos} is not in the range {<span class="hljs-doctag">@code</span> 0-999999}
     *
     * <span class="hljs-doctag">@throws</span>  InterruptedException
     *          if any thread has interrupted the current thread. The
     *          &lt;i&gt;interrupted status&lt;/i&gt; of the current thread is
     *          cleared when this exception is thrown.
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">synchronized</span> <span class="hljs-keyword">void</span> <span class="hljs-title">join</span><span class="hljs-params">(<span class="hljs-keyword">long</span> millis, <span class="hljs-keyword">int</span> nanos)</span>
    <span class="hljs-keyword">throws</span> InterruptedException </span>{

        <span class="hljs-keyword">if</span> (millis &lt; <span class="hljs-number">0</span>) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> IllegalArgumentException(<span class="hljs-string">&quot;timeout value is negative&quot;</span>);
        }

        <span class="hljs-keyword">if</span> (nanos &lt; <span class="hljs-number">0</span> || nanos &gt; <span class="hljs-number">999999</span>) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> IllegalArgumentException(
                                <span class="hljs-string">&quot;nanosecond timeout value out of range&quot;</span>);
        }

        <span class="hljs-keyword">if</span> (nanos &gt;= <span class="hljs-number">500000</span> || (nanos != <span class="hljs-number">0</span> &amp;&amp; millis == <span class="hljs-number">0</span>)) {
            millis++;
        }

        join(millis);
    }

    <span class="hljs-comment">/**
     * Waits for this thread to die.
     *
     * &lt;p&gt; An invocation of this method behaves in exactly the same
     * way as the invocation
     *
     * &lt;blockquote&gt;
     * {<span class="hljs-doctag">@linkplain</span> #join(long) join}{<span class="hljs-doctag">@code</span> (0)}
     * &lt;/blockquote&gt;
     *
     * <span class="hljs-doctag">@throws</span>  InterruptedException
     *          if any thread has interrupted the current thread. The
     *          &lt;i&gt;interrupted status&lt;/i&gt; of the current thread is
     *          cleared when this exception is thrown.
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">void</span> <span class="hljs-title">join</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> InterruptedException </span>{
        join(<span class="hljs-number">0</span>);
    }

    <span class="hljs-comment">/**
     * Prints a stack trace of the current thread to the standard error stream.
     * This method is used only for debugging.
     *
     * <span class="hljs-doctag">@see</span>     Throwable#printStackTrace()
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">dumpStack</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">new</span> Exception(<span class="hljs-string">&quot;Stack trace&quot;</span>).printStackTrace();
    }

    <span class="hljs-comment">/**
     * Marks this thread as either a {<span class="hljs-doctag">@linkplain</span> #isDaemon daemon} thread
     * or a user thread. The Java Virtual Machine exits when the only
     * threads running are all daemon threads.
     *
     * &lt;p&gt; This method must be invoked before the thread is started.
     *
     * <span class="hljs-doctag">@param</span>  on
     *         if {<span class="hljs-doctag">@code</span> true}, marks this thread as a daemon thread
     *
     * <span class="hljs-doctag">@throws</span>  IllegalThreadStateException
     *          if this thread is {<span class="hljs-doctag">@linkplain</span> #isAlive alive}
     *
     * <span class="hljs-doctag">@throws</span>  SecurityException
     *          if {<span class="hljs-doctag">@link</span> #checkAccess} determines that the current
     *          thread cannot modify this thread
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setDaemon</span><span class="hljs-params">(<span class="hljs-keyword">boolean</span> on)</span> </span>{
        checkAccess();
        <span class="hljs-keyword">if</span> (isAlive()) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> IllegalThreadStateException();
        }
        daemon = on;
    }

    <span class="hljs-comment">/**
     * Tests if this thread is a daemon thread.
     *
     * <span class="hljs-doctag">@return</span>  &lt;code&gt;true&lt;/code&gt; if this thread is a daemon thread;
     *          &lt;code&gt;false&lt;/code&gt; otherwise.
     * <span class="hljs-doctag">@see</span>     #setDaemon(boolean)
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">isDaemon</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">return</span> daemon;
    }

    <span class="hljs-comment">/**
     * Determines if the currently running thread has permission to
     * modify this thread.
     * &lt;p&gt;
     * If there is a security manager, its &lt;code&gt;checkAccess&lt;/code&gt; method
     * is called with this thread as its argument. This may result in
     * throwing a &lt;code&gt;SecurityException&lt;/code&gt;.
     *
     * <span class="hljs-doctag">@exception</span>  SecurityException  if the current thread is not allowed to
     *               access this thread.
     * <span class="hljs-doctag">@see</span>        SecurityManager#checkAccess(Thread)
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">void</span> <span class="hljs-title">checkAccess</span><span class="hljs-params">()</span> </span>{
        SecurityManager security = System.getSecurityManager();
        <span class="hljs-keyword">if</span> (security != <span class="hljs-keyword">null</span>) {
            security.checkAccess(<span class="hljs-keyword">this</span>);
        }
    }

    <span class="hljs-comment">/**
     * Returns a string representation of this thread, including the
     * thread&apos;s name, priority, and thread group.
     *
     * <span class="hljs-doctag">@return</span>  a string representation of this thread.
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">toString</span><span class="hljs-params">()</span> </span>{
        ThreadGroup group = getThreadGroup();
        <span class="hljs-keyword">if</span> (group != <span class="hljs-keyword">null</span>) {
            <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;Thread[&quot;</span> + getName() + <span class="hljs-string">&quot;,&quot;</span> + getPriority() + <span class="hljs-string">&quot;,&quot;</span> +
                           group.getName() + <span class="hljs-string">&quot;]&quot;</span>;
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;Thread[&quot;</span> + getName() + <span class="hljs-string">&quot;,&quot;</span> + getPriority() + <span class="hljs-string">&quot;,&quot;</span> +
                            <span class="hljs-string">&quot;&quot;</span> + <span class="hljs-string">&quot;]&quot;</span>;
        }
    }

    <span class="hljs-comment">/**
     * Returns the context ClassLoader for this Thread. The context
     * ClassLoader is provided by the creator of the thread for use
     * by code running in this thread when loading classes and resources.
     * If not {<span class="hljs-doctag">@linkplain</span> #setContextClassLoader set}, the default is the
     * ClassLoader context of the parent Thread. The context ClassLoader of the
     * primordial thread is typically set to the class loader used to load the
     * application.
     *
     * &lt;p&gt;If a security manager is present, and the invoker&apos;s class loader is not
     * {<span class="hljs-doctag">@code</span> null} and is not the same as or an ancestor of the context class
     * loader, then this method invokes the security manager&apos;s {<span class="hljs-doctag">@link</span>
     * SecurityManager#checkPermission(java.security.Permission) checkPermission}
     * method with a {<span class="hljs-doctag">@link</span> RuntimePermission RuntimePermission}{<span class="hljs-doctag">@code</span>
     * (&quot;getClassLoader&quot;)} permission to verify that retrieval of the context
     * class loader is permitted.
     *
     * <span class="hljs-doctag">@return</span>  the context ClassLoader for this Thread, or {<span class="hljs-doctag">@code</span> null}
     *          indicating the system class loader (or, failing that, the
     *          bootstrap class loader)
     *
     * <span class="hljs-doctag">@throws</span>  SecurityException
     *          if the current thread cannot get the context ClassLoader
     *
     * <span class="hljs-doctag">@since</span> 1.2
     */</span>
    <span class="hljs-meta">@CallerSensitive</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> ClassLoader <span class="hljs-title">getContextClassLoader</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">if</span> (contextClassLoader == <span class="hljs-keyword">null</span>)
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">null</span>;
        SecurityManager sm = System.getSecurityManager();
        <span class="hljs-keyword">if</span> (sm != <span class="hljs-keyword">null</span>) {
            ClassLoader.checkClassLoaderPermission(contextClassLoader,
                                                   Reflection.getCallerClass());
        }
        <span class="hljs-keyword">return</span> contextClassLoader;
    }

    <span class="hljs-comment">/**
     * Sets the context ClassLoader for this Thread. The context
     * ClassLoader can be set when a thread is created, and allows
     * the creator of the thread to provide the appropriate class loader,
     * through {<span class="hljs-doctag">@code</span> getContextClassLoader}, to code running in the thread
     * when loading classes and resources.
     *
     * &lt;p&gt;If a security manager is present, its {<span class="hljs-doctag">@link</span>
     * SecurityManager#checkPermission(java.security.Permission) checkPermission}
     * method is invoked with a {<span class="hljs-doctag">@link</span> RuntimePermission RuntimePermission}{<span class="hljs-doctag">@code</span>
     * (&quot;setContextClassLoader&quot;)} permission to see if setting the context
     * ClassLoader is permitted.
     *
     * <span class="hljs-doctag">@param</span>  cl
     *         the context ClassLoader for this Thread, or null  indicating the
     *         system class loader (or, failing that, the bootstrap class loader)
     *
     * <span class="hljs-doctag">@throws</span>  SecurityException
     *          if the current thread cannot set the context ClassLoader
     *
     * <span class="hljs-doctag">@since</span> 1.2
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setContextClassLoader</span><span class="hljs-params">(ClassLoader cl)</span> </span>{
        SecurityManager sm = System.getSecurityManager();
        <span class="hljs-keyword">if</span> (sm != <span class="hljs-keyword">null</span>) {
            sm.checkPermission(<span class="hljs-keyword">new</span> RuntimePermission(<span class="hljs-string">&quot;setContextClassLoader&quot;</span>));
        }
        contextClassLoader = cl;
    }

    <span class="hljs-comment">/**
     * Returns &lt;tt&gt;true&lt;/tt&gt; if and only if the current thread holds the
     * monitor lock on the specified object.
     *
     * &lt;p&gt;This method is designed to allow a program to assert that
     * the current thread already holds a specified lock:
     * &lt;pre&gt;
     *     assert Thread.holdsLock(obj);
     * &lt;/pre&gt;
     *
     * <span class="hljs-doctag">@param</span>  obj the object on which to test lock ownership
     * <span class="hljs-doctag">@throws</span> NullPointerException if obj is &lt;tt&gt;null&lt;/tt&gt;
     * <span class="hljs-doctag">@return</span> &lt;tt&gt;true&lt;/tt&gt; if the current thread holds the monitor lock on
     *         the specified object.
     * <span class="hljs-doctag">@since</span> 1.4
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">native</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">holdsLock</span><span class="hljs-params">(Object obj)</span></span>;

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> StackTraceElement[] EMPTY_STACK_TRACE
        = <span class="hljs-keyword">new</span> StackTraceElement[<span class="hljs-number">0</span>];

    <span class="hljs-comment">/**
     * Returns an array of stack trace elements representing the stack dump
     * of this thread.  This method will return a zero-length array if
     * this thread has not started, has started but has not yet been
     * scheduled to run by the system, or has terminated.
     * If the returned array is of non-zero length then the first element of
     * the array represents the top of the stack, which is the most recent
     * method invocation in the sequence.  The last element of the array
     * represents the bottom of the stack, which is the least recent method
     * invocation in the sequence.
     *
     * &lt;p&gt;If there is a security manager, and this thread is not
     * the current thread, then the security manager&apos;s
     * &lt;tt&gt;checkPermission&lt;/tt&gt; method is called with a
     * &lt;tt&gt;RuntimePermission(&quot;getStackTrace&quot;)&lt;/tt&gt; permission
     * to see if it&apos;s ok to get the stack trace.
     *
     * &lt;p&gt;Some virtual machines may, under some circumstances, omit one
     * or more stack frames from the stack trace.  In the extreme case,
     * a virtual machine that has no stack trace information concerning
     * this thread is permitted to return a zero-length array from this
     * method.
     *
     * <span class="hljs-doctag">@return</span> an array of &lt;tt&gt;StackTraceElement&lt;/tt&gt;,
     * each represents one stack frame.
     *
     * <span class="hljs-doctag">@throws</span> SecurityException
     *        if a security manager exists and its
     *        &lt;tt&gt;checkPermission&lt;/tt&gt; method doesn&apos;t allow
     *        getting the stack trace of thread.
     * <span class="hljs-doctag">@see</span> SecurityManager#checkPermission
     * <span class="hljs-doctag">@see</span> RuntimePermission
     * <span class="hljs-doctag">@see</span> Throwable#getStackTrace
     *
     * <span class="hljs-doctag">@since</span> 1.5
     */</span>
    <span class="hljs-keyword">public</span> StackTraceElement[] getStackTrace() {
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span> != Thread.currentThread()) {
            <span class="hljs-comment">// check for getStackTrace permission</span>
            SecurityManager security = System.getSecurityManager();
            <span class="hljs-keyword">if</span> (security != <span class="hljs-keyword">null</span>) {
                security.checkPermission(
                    SecurityConstants.GET_STACK_TRACE_PERMISSION);
            }
            <span class="hljs-comment">// optimization so we do not call into the vm for threads that</span>
            <span class="hljs-comment">// have not yet started or have terminated</span>
            <span class="hljs-keyword">if</span> (!isAlive()) {
                <span class="hljs-keyword">return</span> EMPTY_STACK_TRACE;
            }
            StackTraceElement[][] stackTraceArray = dumpThreads(<span class="hljs-keyword">new</span> Thread[] {<span class="hljs-keyword">this</span>});
            StackTraceElement[] stackTrace = stackTraceArray[<span class="hljs-number">0</span>];
            <span class="hljs-comment">// a thread that was alive during the previous isAlive call may have</span>
            <span class="hljs-comment">// since terminated, therefore not having a stacktrace.</span>
            <span class="hljs-keyword">if</span> (stackTrace == <span class="hljs-keyword">null</span>) {
                stackTrace = EMPTY_STACK_TRACE;
            }
            <span class="hljs-keyword">return</span> stackTrace;
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-comment">// Don&apos;t need JVM help for current thread</span>
            <span class="hljs-keyword">return</span> (<span class="hljs-keyword">new</span> Exception()).getStackTrace();
        }
    }

    <span class="hljs-comment">/**
     * Returns a map of stack traces for all live threads.
     * The map keys are threads and each map value is an array of
     * &lt;tt&gt;StackTraceElement&lt;/tt&gt; that represents the stack dump
     * of the corresponding &lt;tt&gt;Thread&lt;/tt&gt;.
     * The returned stack traces are in the format specified for
     * the {<span class="hljs-doctag">@link</span> #getStackTrace getStackTrace} method.
     *
     * &lt;p&gt;The threads may be executing while this method is called.
     * The stack trace of each thread only represents a snapshot and
     * each stack trace may be obtained at different time.  A zero-length
     * array will be returned in the map value if the virtual machine has
     * no stack trace information about a thread.
     *
     * &lt;p&gt;If there is a security manager, then the security manager&apos;s
     * &lt;tt&gt;checkPermission&lt;/tt&gt; method is called with a
     * &lt;tt&gt;RuntimePermission(&quot;getStackTrace&quot;)&lt;/tt&gt; permission as well as
     * &lt;tt&gt;RuntimePermission(&quot;modifyThreadGroup&quot;)&lt;/tt&gt; permission
     * to see if it is ok to get the stack trace of all threads.
     *
     * <span class="hljs-doctag">@return</span> a &lt;tt&gt;Map&lt;/tt&gt; from &lt;tt&gt;Thread&lt;/tt&gt; to an array of
     * &lt;tt&gt;StackTraceElement&lt;/tt&gt; that represents the stack trace of
     * the corresponding thread.
     *
     * <span class="hljs-doctag">@throws</span> SecurityException
     *        if a security manager exists and its
     *        &lt;tt&gt;checkPermission&lt;/tt&gt; method doesn&apos;t allow
     *        getting the stack trace of thread.
     * <span class="hljs-doctag">@see</span> #getStackTrace
     * <span class="hljs-doctag">@see</span> SecurityManager#checkPermission
     * <span class="hljs-doctag">@see</span> RuntimePermission
     * <span class="hljs-doctag">@see</span> Throwable#getStackTrace
     *
     * <span class="hljs-doctag">@since</span> 1.5
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Map&lt;Thread, StackTraceElement[]&gt; getAllStackTraces() {
        <span class="hljs-comment">// check for getStackTrace permission</span>
        SecurityManager security = System.getSecurityManager();
        <span class="hljs-keyword">if</span> (security != <span class="hljs-keyword">null</span>) {
            security.checkPermission(
                SecurityConstants.GET_STACK_TRACE_PERMISSION);
            security.checkPermission(
                SecurityConstants.MODIFY_THREADGROUP_PERMISSION);
        }

        <span class="hljs-comment">// Get a snapshot of the list of all threads</span>
        Thread[] threads = getThreads();
        StackTraceElement[][] traces = dumpThreads(threads);
        Map&lt;Thread, StackTraceElement[]&gt; m = <span class="hljs-keyword">new</span> HashMap&lt;&gt;(threads.length);
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; threads.length; i++) {
            StackTraceElement[] stackTrace = traces[i];
            <span class="hljs-keyword">if</span> (stackTrace != <span class="hljs-keyword">null</span>) {
                m.put(threads[i], stackTrace);
            }
            <span class="hljs-comment">// else terminated so we don&apos;t put it in the map</span>
        }
        <span class="hljs-keyword">return</span> m;
    }


    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> RuntimePermission SUBCLASS_IMPLEMENTATION_PERMISSION =
                    <span class="hljs-keyword">new</span> RuntimePermission(<span class="hljs-string">&quot;enableContextClassLoaderOverride&quot;</span>);

    <span class="hljs-comment">/** cache of subclass security audit results */</span>
    <span class="hljs-comment">/* Replace with ConcurrentReferenceHashMap when/if it appears in a future
     * release */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Caches</span> </span>{
        <span class="hljs-comment">/** cache of subclass security audit results */</span>
        <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> ConcurrentMap&lt;WeakClassKey,Boolean&gt; subclassAudits =
            <span class="hljs-keyword">new</span> ConcurrentHashMap&lt;&gt;();

        <span class="hljs-comment">/** queue for WeakReferences to audited subclasses */</span>
        <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> ReferenceQueue&lt;Class&lt;?&gt;&gt; subclassAuditsQueue =
            <span class="hljs-keyword">new</span> ReferenceQueue&lt;&gt;();
    }

    <span class="hljs-comment">/**
     * Verifies that this (possibly subclass) instance can be constructed
     * without violating security constraints: the subclass must not override
     * security-sensitive non-final methods, or else the
     * &quot;enableContextClassLoaderOverride&quot; RuntimePermission is checked.
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">isCCLOverridden</span><span class="hljs-params">(Class&lt;?&gt; cl)</span> </span>{
        <span class="hljs-keyword">if</span> (cl == Thread.class)
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;

        processQueue(Caches.subclassAuditsQueue, Caches.subclassAudits);
        WeakClassKey key = <span class="hljs-keyword">new</span> WeakClassKey(cl, Caches.subclassAuditsQueue);
        Boolean result = Caches.subclassAudits.get(key);
        <span class="hljs-keyword">if</span> (result == <span class="hljs-keyword">null</span>) {
            result = Boolean.valueOf(auditSubclass(cl));
            Caches.subclassAudits.putIfAbsent(key, result);
        }

        <span class="hljs-keyword">return</span> result.booleanValue();
    }

    <span class="hljs-comment">/**
     * Performs reflective checks on given subclass to verify that it doesn&apos;t
     * override security-sensitive non-final methods.  Returns true if the
     * subclass overrides any of the methods, false otherwise.
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">auditSubclass</span><span class="hljs-params">(<span class="hljs-keyword">final</span> Class&lt;?&gt; subcl)</span> </span>{
        Boolean result = AccessController.doPrivileged(
            <span class="hljs-keyword">new</span> PrivilegedAction&lt;Boolean&gt;() {
                <span class="hljs-function"><span class="hljs-keyword">public</span> Boolean <span class="hljs-title">run</span><span class="hljs-params">()</span> </span>{
                    <span class="hljs-keyword">for</span> (Class&lt;?&gt; cl = subcl;
                         cl != Thread.class;
                         cl = cl.getSuperclass())
                    {
                        <span class="hljs-keyword">try</span> {
                            cl.getDeclaredMethod(<span class="hljs-string">&quot;getContextClassLoader&quot;</span>, <span class="hljs-keyword">new</span> Class&lt;?&gt;[<span class="hljs-number">0</span>]);
                            <span class="hljs-keyword">return</span> Boolean.TRUE;
                        } <span class="hljs-keyword">catch</span> (NoSuchMethodException ex) {
                        }
                        <span class="hljs-keyword">try</span> {
                            Class&lt;?&gt;[] params = {ClassLoader.class};
                            cl.getDeclaredMethod(<span class="hljs-string">&quot;setContextClassLoader&quot;</span>, params);
                            <span class="hljs-keyword">return</span> Boolean.TRUE;
                        } <span class="hljs-keyword">catch</span> (NoSuchMethodException ex) {
                        }
                    }
                    <span class="hljs-keyword">return</span> Boolean.FALSE;
                }
            }
        );
        <span class="hljs-keyword">return</span> result.booleanValue();
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">native</span> <span class="hljs-keyword">static</span> StackTraceElement[][] dumpThreads(Thread[] threads);
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">native</span> <span class="hljs-keyword">static</span> Thread[] getThreads();

    <span class="hljs-comment">/**
     * Returns the identifier of this Thread.  The thread ID is a positive
     * &lt;tt&gt;long&lt;/tt&gt; number generated when this thread was created.
     * The thread ID is unique and remains unchanged during its lifetime.
     * When a thread is terminated, this thread ID may be reused.
     *
     * <span class="hljs-doctag">@return</span> this thread&apos;s ID.
     * <span class="hljs-doctag">@since</span> 1.5
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">long</span> <span class="hljs-title">getId</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">return</span> tid;
    }

    <span class="hljs-comment">/**
     * A thread state.  A thread can be in one of the following states:
     * &lt;ul&gt;
     * &lt;li&gt;{<span class="hljs-doctag">@link</span> #NEW}&lt;br&gt;
     *     A thread that has not yet started is in this state.
     *     &lt;/li&gt;
     * &lt;li&gt;{<span class="hljs-doctag">@link</span> #RUNNABLE}&lt;br&gt;
     *     A thread executing in the Java virtual machine is in this state.
     *     &lt;/li&gt;
     * &lt;li&gt;{<span class="hljs-doctag">@link</span> #BLOCKED}&lt;br&gt;
     *     A thread that is blocked waiting for a monitor lock
     *     is in this state.
     *     &lt;/li&gt;
     * &lt;li&gt;{<span class="hljs-doctag">@link</span> #WAITING}&lt;br&gt;
     *     A thread that is waiting indefinitely for another thread to
     *     perform a particular action is in this state.
     *     &lt;/li&gt;
     * &lt;li&gt;{<span class="hljs-doctag">@link</span> #TIMED_WAITING}&lt;br&gt;
     *     A thread that is waiting for another thread to perform an action
     *     for up to a specified waiting time is in this state.
     *     &lt;/li&gt;
     * &lt;li&gt;{<span class="hljs-doctag">@link</span> #TERMINATED}&lt;br&gt;
     *     A thread that has exited is in this state.
     *     &lt;/li&gt;
     * &lt;/ul&gt;
     *
     * &lt;p&gt;
     * A thread can be in only one state at a given point in time.
     * These states are virtual machine states which do not reflect
     * any operating system thread states.
     *
     * <span class="hljs-doctag">@since</span>   1.5
     * <span class="hljs-doctag">@see</span> #getState
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">enum</span> State {
        <span class="hljs-comment">/**
         * Thread state for a thread which has not yet started.
         */</span>
        NEW,

        <span class="hljs-comment">/**
         * Thread state for a runnable thread.  A thread in the runnable
         * state is executing in the Java virtual machine but it may
         * be waiting for other resources from the operating system
         * such as processor.
         */</span>
        RUNNABLE,

        <span class="hljs-comment">/**
         * Thread state for a thread blocked waiting for a monitor lock.
         * A thread in the blocked state is waiting for a monitor lock
         * to enter a synchronized block/method or
         * reenter a synchronized block/method after calling
         * {<span class="hljs-doctag">@link</span> Object#wait() Object.wait}.
         */</span>
        BLOCKED,

        <span class="hljs-comment">/**
         * Thread state for a waiting thread.
         * A thread is in the waiting state due to calling one of the
         * following methods:
         * &lt;ul&gt;
         *   &lt;li&gt;{<span class="hljs-doctag">@link</span> Object#wait() Object.wait} with no timeout&lt;/li&gt;
         *   &lt;li&gt;{<span class="hljs-doctag">@link</span> #join() Thread.join} with no timeout&lt;/li&gt;
         *   &lt;li&gt;{<span class="hljs-doctag">@link</span> LockSupport#park() LockSupport.park}&lt;/li&gt;
         * &lt;/ul&gt;
         *
         * &lt;p&gt;A thread in the waiting state is waiting for another thread to
         * perform a particular action.
         *
         * For example, a thread that has called &lt;tt&gt;Object.wait()&lt;/tt&gt;
         * on an object is waiting for another thread to call
         * &lt;tt&gt;Object.notify()&lt;/tt&gt; or &lt;tt&gt;Object.notifyAll()&lt;/tt&gt; on
         * that object. A thread that has called &lt;tt&gt;Thread.join()&lt;/tt&gt;
         * is waiting for a specified thread to terminate.
         */</span>
        WAITING,

        <span class="hljs-comment">/**
         * Thread state for a waiting thread with a specified waiting time.
         * A thread is in the timed waiting state due to calling one of
         * the following methods with a specified positive waiting time:
         * &lt;ul&gt;
         *   &lt;li&gt;{<span class="hljs-doctag">@link</span> #sleep Thread.sleep}&lt;/li&gt;
         *   &lt;li&gt;{<span class="hljs-doctag">@link</span> Object#wait(long) Object.wait} with timeout&lt;/li&gt;
         *   &lt;li&gt;{<span class="hljs-doctag">@link</span> #join(long) Thread.join} with timeout&lt;/li&gt;
         *   &lt;li&gt;{<span class="hljs-doctag">@link</span> LockSupport#parkNanos LockSupport.parkNanos}&lt;/li&gt;
         *   &lt;li&gt;{<span class="hljs-doctag">@link</span> LockSupport#parkUntil LockSupport.parkUntil}&lt;/li&gt;
         * &lt;/ul&gt;
         */</span>
        TIMED_WAITING,

        <span class="hljs-comment">/**
         * Thread state for a terminated thread.
         * The thread has completed execution.
         */</span>
        TERMINATED;
    }

    <span class="hljs-comment">/**
     * Returns the state of this thread.
     * This method is designed for use in monitoring of the system state,
     * not for synchronization control.
     *
     * <span class="hljs-doctag">@return</span> this thread&apos;s state.
     * <span class="hljs-doctag">@since</span> 1.5
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> State <span class="hljs-title">getState</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-comment">// get current thread state</span>
        <span class="hljs-keyword">return</span> sun.misc.VM.toThreadState(threadStatus);
    }

    <span class="hljs-comment">// Added in JSR-166</span>

    <span class="hljs-comment">/**
     * Interface for handlers invoked when a &lt;tt&gt;Thread&lt;/tt&gt; abruptly
     * terminates due to an uncaught exception.
     * &lt;p&gt;When a thread is about to terminate due to an uncaught exception
     * the Java Virtual Machine will query the thread for its
     * &lt;tt&gt;UncaughtExceptionHandler&lt;/tt&gt; using
     * {<span class="hljs-doctag">@link</span> #getUncaughtExceptionHandler} and will invoke the handler&apos;s
     * &lt;tt&gt;uncaughtException&lt;/tt&gt; method, passing the thread and the
     * exception as arguments.
     * If a thread has not had its &lt;tt&gt;UncaughtExceptionHandler&lt;/tt&gt;
     * explicitly set, then its &lt;tt&gt;ThreadGroup&lt;/tt&gt; object acts as its
     * &lt;tt&gt;UncaughtExceptionHandler&lt;/tt&gt;. If the &lt;tt&gt;ThreadGroup&lt;/tt&gt; object
     * has no
     * special requirements for dealing with the exception, it can forward
     * the invocation to the {<span class="hljs-doctag">@linkplain</span> #getDefaultUncaughtExceptionHandler
     * default uncaught exception handler}.
     *
     * <span class="hljs-doctag">@see</span> #setDefaultUncaughtExceptionHandler
     * <span class="hljs-doctag">@see</span> #setUncaughtExceptionHandler
     * <span class="hljs-doctag">@see</span> ThreadGroup#uncaughtException
     * <span class="hljs-doctag">@since</span> 1.5
     */</span>
    <span class="hljs-meta">@FunctionalInterface</span>
    <span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">UncaughtExceptionHandler</span> </span>{
        <span class="hljs-comment">/**
         * Method invoked when the given thread terminates due to the
         * given uncaught exception.
         * &lt;p&gt;Any exception thrown by this method will be ignored by the
         * Java Virtual Machine.
         * <span class="hljs-doctag">@param</span> t the thread
         * <span class="hljs-doctag">@param</span> e the exception
         */</span>
        <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">uncaughtException</span><span class="hljs-params">(Thread t, Throwable e)</span></span>;
    }

    <span class="hljs-comment">// null unless explicitly set</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">volatile</span> UncaughtExceptionHandler uncaughtExceptionHandler;

    <span class="hljs-comment">// null unless explicitly set</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">volatile</span> UncaughtExceptionHandler defaultUncaughtExceptionHandler;

    <span class="hljs-comment">/**
     * Set the default handler invoked when a thread abruptly terminates
     * due to an uncaught exception, and no other handler has been defined
     * for that thread.
     *
     * &lt;p&gt;Uncaught exception handling is controlled first by the thread, then
     * by the thread&apos;s {<span class="hljs-doctag">@link</span> ThreadGroup} object and finally by the default
     * uncaught exception handler. If the thread does not have an explicit
     * uncaught exception handler set, and the thread&apos;s thread group
     * (including parent thread groups)  does not specialize its
     * &lt;tt&gt;uncaughtException&lt;/tt&gt; method, then the default handler&apos;s
     * &lt;tt&gt;uncaughtException&lt;/tt&gt; method will be invoked.
     * &lt;p&gt;By setting the default uncaught exception handler, an application
     * can change the way in which uncaught exceptions are handled (such as
     * logging to a specific device, or file) for those threads that would
     * already accept whatever &amp;quot;default&amp;quot; behavior the system
     * provided.
     *
     * &lt;p&gt;Note that the default uncaught exception handler should not usually
     * defer to the thread&apos;s &lt;tt&gt;ThreadGroup&lt;/tt&gt; object, as that could cause
     * infinite recursion.
     *
     * <span class="hljs-doctag">@param</span> eh the object to use as the default uncaught exception handler.
     * If &lt;tt&gt;null&lt;/tt&gt; then there is no default handler.
     *
     * <span class="hljs-doctag">@throws</span> SecurityException if a security manager is present and it
     *         denies &lt;tt&gt;{<span class="hljs-doctag">@link</span> RuntimePermission}
     *         (&amp;quot;setDefaultUncaughtExceptionHandler&amp;quot;)&lt;/tt&gt;
     *
     * <span class="hljs-doctag">@see</span> #setUncaughtExceptionHandler
     * <span class="hljs-doctag">@see</span> #getUncaughtExceptionHandler
     * <span class="hljs-doctag">@see</span> ThreadGroup#uncaughtException
     * <span class="hljs-doctag">@since</span> 1.5
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setDefaultUncaughtExceptionHandler</span><span class="hljs-params">(UncaughtExceptionHandler eh)</span> </span>{
        SecurityManager sm = System.getSecurityManager();
        <span class="hljs-keyword">if</span> (sm != <span class="hljs-keyword">null</span>) {
            sm.checkPermission(
                <span class="hljs-keyword">new</span> RuntimePermission(<span class="hljs-string">&quot;setDefaultUncaughtExceptionHandler&quot;</span>)
                    );
        }

         defaultUncaughtExceptionHandler = eh;
     }

    <span class="hljs-comment">/**
     * Returns the default handler invoked when a thread abruptly terminates
     * due to an uncaught exception. If the returned value is &lt;tt&gt;null&lt;/tt&gt;,
     * there is no default.
     * <span class="hljs-doctag">@since</span> 1.5
     * <span class="hljs-doctag">@see</span> #setDefaultUncaughtExceptionHandler
     * <span class="hljs-doctag">@return</span> the default uncaught exception handler for all threads
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> UncaughtExceptionHandler <span class="hljs-title">getDefaultUncaughtExceptionHandler</span><span class="hljs-params">()</span></span>{
        <span class="hljs-keyword">return</span> defaultUncaughtExceptionHandler;
    }

    <span class="hljs-comment">/**
     * Returns the handler invoked when this thread abruptly terminates
     * due to an uncaught exception. If this thread has not had an
     * uncaught exception handler explicitly set then this thread&apos;s
     * &lt;tt&gt;ThreadGroup&lt;/tt&gt; object is returned, unless this thread
     * has terminated, in which case &lt;tt&gt;null&lt;/tt&gt; is returned.
     * <span class="hljs-doctag">@since</span> 1.5
     * <span class="hljs-doctag">@return</span> the uncaught exception handler for this thread
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> UncaughtExceptionHandler <span class="hljs-title">getUncaughtExceptionHandler</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">return</span> uncaughtExceptionHandler != <span class="hljs-keyword">null</span> ?
            uncaughtExceptionHandler : group;
    }

    <span class="hljs-comment">/**
     * Set the handler invoked when this thread abruptly terminates
     * due to an uncaught exception.
     * &lt;p&gt;A thread can take full control of how it responds to uncaught
     * exceptions by having its uncaught exception handler explicitly set.
     * If no such handler is set then the thread&apos;s &lt;tt&gt;ThreadGroup&lt;/tt&gt;
     * object acts as its handler.
     * <span class="hljs-doctag">@param</span> eh the object to use as this thread&apos;s uncaught exception
     * handler. If &lt;tt&gt;null&lt;/tt&gt; then this thread has no explicit handler.
     * <span class="hljs-doctag">@throws</span>  SecurityException  if the current thread is not allowed to
     *          modify this thread.
     * <span class="hljs-doctag">@see</span> #setDefaultUncaughtExceptionHandler
     * <span class="hljs-doctag">@see</span> ThreadGroup#uncaughtException
     * <span class="hljs-doctag">@since</span> 1.5
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setUncaughtExceptionHandler</span><span class="hljs-params">(UncaughtExceptionHandler eh)</span> </span>{
        checkAccess();
        uncaughtExceptionHandler = eh;
    }

    <span class="hljs-comment">/**
     * Dispatch an uncaught exception to the handler. This method is
     * intended to be called only by the JVM.
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">dispatchUncaughtException</span><span class="hljs-params">(Throwable e)</span> </span>{
        getUncaughtExceptionHandler().uncaughtException(<span class="hljs-keyword">this</span>, e);
    }

    <span class="hljs-comment">/**
     * Removes from the specified map any keys that have been enqueued
     * on the specified reference queue.
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">processQueue</span><span class="hljs-params">(ReferenceQueue&lt;Class&lt;?&gt;&gt; queue,
                             ConcurrentMap&lt;? extends
                             WeakReference&lt;Class&lt;?&gt;&gt;, ?&gt; map)</span>
    </span>{
        Reference&lt;? extends Class&lt;?&gt;&gt; ref;
        <span class="hljs-keyword">while</span>((ref = queue.poll()) != <span class="hljs-keyword">null</span>) {
            map.remove(ref);
        }
    }

    <span class="hljs-comment">/**
     *  Weak key for Class objects.
     **/</span>
    <span class="hljs-keyword">static</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">WeakClassKey</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">WeakReference</span>&lt;<span class="hljs-title">Class</span>&lt;?&gt;&gt; </span>{
        <span class="hljs-comment">/**
         * saved value of the referent&apos;s identity hash code, to maintain
         * a consistent hash code after the referent has been cleared
         */</span>
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">int</span> hash;

        <span class="hljs-comment">/**
         * Create a new WeakClassKey to the given object, registered
         * with a queue.
         */</span>
        WeakClassKey(Class&lt;?&gt; cl, ReferenceQueue&lt;Class&lt;?&gt;&gt; refQueue) {
            <span class="hljs-keyword">super</span>(cl, refQueue);
            hash = System.identityHashCode(cl);
        }

        <span class="hljs-comment">/**
         * Returns the identity hash code of the original referent.
         */</span>
        <span class="hljs-meta">@Override</span>
        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">hashCode</span><span class="hljs-params">()</span> </span>{
            <span class="hljs-keyword">return</span> hash;
        }

        <span class="hljs-comment">/**
         * Returns true if the given object is this identical
         * WeakClassKey instance, or, if this object&apos;s referent has not
         * been cleared, if the given object is another WeakClassKey
         * instance with the identical non-null referent as this one.
         */</span>
        <span class="hljs-meta">@Override</span>
        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">equals</span><span class="hljs-params">(Object obj)</span> </span>{
            <span class="hljs-keyword">if</span> (obj == <span class="hljs-keyword">this</span>)
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>;

            <span class="hljs-keyword">if</span> (obj <span class="hljs-keyword">instanceof</span> WeakClassKey) {
                Object referent = get();
                <span class="hljs-keyword">return</span> (referent != <span class="hljs-keyword">null</span>) &amp;&amp;
                       (referent == ((WeakClassKey) obj).get());
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;
            }
        }
    }


    <span class="hljs-comment">// The following three initially uninitialized fields are exclusively</span>
    <span class="hljs-comment">// managed by class java.util.concurrent.ThreadLocalRandom. These</span>
    <span class="hljs-comment">// fields are used to build the high-performance PRNGs in the</span>
    <span class="hljs-comment">// concurrent code, and we can not risk accidental false sharing.</span>
    <span class="hljs-comment">// Hence, the fields are isolated with @Contended.</span>

    <span class="hljs-comment">/** The current seed for a ThreadLocalRandom */</span>
    <span class="hljs-meta">@sun</span>.misc.Contended(<span class="hljs-string">&quot;tlr&quot;</span>)
    <span class="hljs-keyword">long</span> threadLocalRandomSeed;

    <span class="hljs-comment">/** Probe hash value; nonzero if threadLocalRandomSeed initialized */</span>
    <span class="hljs-meta">@sun</span>.misc.Contended(<span class="hljs-string">&quot;tlr&quot;</span>)
    <span class="hljs-keyword">int</span> threadLocalRandomProbe;

    <span class="hljs-comment">/** Secondary seed isolated from public ThreadLocalRandom sequence */</span>
    <span class="hljs-meta">@sun</span>.misc.Contended(<span class="hljs-string">&quot;tlr&quot;</span>)
    <span class="hljs-keyword">int</span> threadLocalRandomSecondarySeed;

    <span class="hljs-comment">/* Some private helper methods */</span>
    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">native</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setPriority0</span><span class="hljs-params">(<span class="hljs-keyword">int</span> newPriority)</span></span>;
    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">native</span> <span class="hljs-keyword">void</span> <span class="hljs-title">stop0</span><span class="hljs-params">(Object o)</span></span>;
    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">native</span> <span class="hljs-keyword">void</span> <span class="hljs-title">suspend0</span><span class="hljs-params">()</span></span>;
    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">native</span> <span class="hljs-keyword">void</span> <span class="hljs-title">resume0</span><span class="hljs-params">()</span></span>;
    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">native</span> <span class="hljs-keyword">void</span> <span class="hljs-title">interrupt0</span><span class="hljs-params">()</span></span>;
    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">native</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setNativeName</span><span class="hljs-params">(String name)</span></span>;
}
</code></pre>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="Process.html" class="navigation navigation-prev " aria-label="Previous page: Process">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="Runtime.html" class="navigation navigation-next " aria-label="Next page: Runtime">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Thread","level":"1.2.1.27","depth":3,"next":{"title":"Runtime","level":"1.2.1.28","depth":3,"path":"src/java/lang/Runtime.md","ref":"src/java/lang/Runtime.md","articles":[]},"previous":{"title":"Process","level":"1.2.1.26","depth":3,"path":"src/java/lang/Process.md","ref":"src/java/lang/Process.md","articles":[]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{},"plugins":["livereload"],"pluginsConfig":{"livereload":{},"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"}},"file":{"path":"src/java/lang/Thread.md","mtime":"2019-09-12T03:22:05.548Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2019-09-12T03:30:06.914Z"},"basePath":"../../..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../../../gitbook/gitbook.js"></script>
    <script src="../../../gitbook/theme.js"></script>
    
        
        <script src="../../../gitbook/gitbook-plugin-livereload/plugin.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

